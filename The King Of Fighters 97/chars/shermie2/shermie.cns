[Data]
life = 2000
attack = 100
defence = 100  ;100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 0,3
guard.sparkno = 0,20
KO.echo = 0
volume = 50
power=3000
IntPersistIndex = 0
FloatPersistIndex = 40

[Size]
xscale = 1
yscale = 1
ground.back = 16
ground.front = 15
stand.height = 80
head.pos = -4,-100
mid.pos = 2,-69
air.back = 12
air.front = 11
z.width = 3
attack.width = 4,4
attack.dist = 160
proj.attack.dist = 90

[Velocity]
walk.fwd  = 2.88
walk.back = -2.88
run.fwd  = 6.5,0
jump.neu = 0,-9
jump.back = -2.88
jump.fwd = 2.88

[Movement]
airjump.num = 0
yaccel = .54
stand.friction = .8
crouch.friction = .8

; Stance
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5 && Anim != 6000
trigger2 = Anim = 5 && AnimTime = 0
value = IfElse((Var(1) > 0),6000,0)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3]
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4]
type = Explod
trigger1 = Anim = 6000
trigger1 = AnimElem = 6 || AnimElem = 25 || AnimElem = 30 || AnimElem = 47
anim = 6001
ID = 1
sprpriority = 3
postype = p1
pos = 0,0
bindtime = 1
removeongethit = 1

[State 0, 5]
type = Explod
trigger1 = Anim = 6000
trigger1 = AnimElem = 10 || AnimElem = 33
anim = 6002
ID = 1
sprpriority = 3
postype = p1
pos = 0,0
bindtime = 1
removeongethit = 1

[State 0, 6]
type = Explod
trigger1 = Anim = 6000
trigger1 = AnimElem = 18 || AnimElem = 43
anim = 6003
ID = 1
sprpriority = 3
postype = p1
pos = 0,0
bindtime = 1
removeongethit = 1

[State 0, 7]
type = Explod
trigger1 = Anim = 6000
trigger1 = AnimElem = 39
anim = 6004
ID = 1
sprpriority = 3
postype = p1
pos = 0,0
bindtime = 1
removeongethit = 1

; Jump Start
[Statedef 40]
type = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
triggerall = var(30)
triggerall = !time
trigger1 = 1
sysvar(1) = 0

[State 40, 1]
type = VarSet
triggerall = var(30)
triggerall = !time
trigger1 = p2bodydist x>=80
trigger2 = p2bodydist x<80 && (p2statetype=C || p2statetype=S && random<=333)
sysvar(1) = 1

[State 40, 1]
type = VarSet
triggerall = var(30)
triggerall = !time
trigger1 = p2bodydist x<80 && p2statetype=A && random<=500
trigger2 = enemy,vel x>3 && random<=666 && p2bodydist x<=120
sysvar(1) = -1

[State 40, 3]
type = VarSet
triggerall = var(30)
triggerall = !time
trigger1 = p2bodydist x>=120 && enemy,numproj
var(5) = 1

[State 40, 1]
type = VarSet
triggerall = var(30)=0
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
triggerall = var(30)=0
trigger1 = Time = 0
var(5) = 0

[State 40, 3]
type = VarSet
triggerall = var(30)=0
trigger1 = command = "longjump"
trigger2 = prevstateno = 100 && command = "holdfwd"
var(5) = 1

[State 40, 4]
type = VarSet
triggerall = var(30)=0
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 5]
type = VarSet
triggerall = var(30)=0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 7]
type = PlaySnd
trigger1 = AnimTime = 0 && (Var(5) = 0 || (Var(5) && Sysvar(1) = 0))
value = 40,0

[State 40, 8]
type = PlaySnd
trigger1 = Var(5) && Sysvar(1) != 0 && AnimTime = 0 
value = 40,1

[State 40, 9]
type = ChangeState
triggerall = var(30)=0
trigger1 = AnimTime = 0 && command != "holdup"
value = 950
ctrl = 1

[State 40, 9]
type = ChangeState
triggerall = var(30)
triggerall = AnimTime=0
triggerall = !enemy,numproj && p2statetype!=A
trigger1 = p2movetype!=A && random<=666
trigger2 = p2movetype=A && random<=222
value = 950
ctrl = 1

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = VelSet
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-4.4,4.33))

[State 50, 3]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 4]
type = AfterImage
trigger1 = Time = 0 && Var(5) && Vel X != 0
time = 10
trans = add1
timegap = 1
framegap = 2
length = 8
palbright = 12,12,12
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

; Run
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 1

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 4
loop = 1

[State 100, 4]
type = StopSnd
trigger1 = command != "holdfwd"
channel = 1

[State 100, 5]
type = ChangeState
triggerall = time>=13
trigger1 = var(30)=0
trigger1 = command != "holdfwd"
trigger2 = var(30)
value = 0
ctrl=1

; Hop back (launch)
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
velset = 0
ctrl = 0

[State 105, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 106

; Hop back (in the air)
[Statedef 106]
type = A
movetype = I
physics = N
anim = 106
velset = -9,-6

[State 106, 1]
type = PlaySnd
trigger1 = Time = 0
value = 105,0

[State 106, 2]
type = VelAdd
trigger1 = Time > 0
y = .73

[State 106, 3]
type = VelMul
trigger1 = Time > 0
x = .92

[State 106, 4]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 107

; Hop back (land)
[Statedef 107]
type = S
movetype = I
physics = S
anim = 107
velset = 0,0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Win
[Statedef 180]
type = S
velset = 0

[State 180, 1]
type = ChangeState
trigger1 = Var(4) != 0
value = 6181

[State 180, 2]
type = VarRandom
trigger1 = Time = 0
v = 2
range = 0,99

[State 180, 3]
type = ChangeState
trigger1 = command = "hold_x"
value = 181

[State 180, 4]
type = ChangeState
trigger1 = command = "hold_a"
value = 182

[State 180, 5]
type = ChangeState
trigger1 = command = "hold_y"
value = 183

[State 180, 6]
type = ChangeState
trigger1 = command = "hold_b"
value = 184

[State 180, 7]
type = ChangeState
trigger1 = Var(2) = [0,24]
value = 181

[State 180, 8]
type = ChangeState
trigger1 = Var(2) = [25,49]
value = 182

[State 180, 9]
type = ChangeState
trigger1 = Var(2) = [50,74]
value = 183

[State 180, 10]
type = ChangeState
trigger1 = Var(2) = [75,99]
value = 184

; Win pose A
[Statedef 181]
type = S
anim = 181

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0,275]
flag = RoundNotOver

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 181,0
persistent = 0

[State 181, 3]
type = PlaySnd
trigger1 = AnimElem = 14
value = 181,1
persistent = 0

; Win pose B
[Statedef 182]
type = S
anim = 182

[State 182, 1]
type = AssertSpecial
trigger1 = Time = [0,220]
flag = RoundNotOver

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 18
value = 182,0

; Win pose C
[Statedef 183]
type = S
physics = N
anim = 183

[State 183, 1]
type = AssertSpecial
trigger1 = Time = [0,175]
flag = RoundNotOver

[State 183, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 183,0

[State 183, 3]
type = PlaySnd
trigger1 = AnimElem = 6
value = 183,1

; Win pose D
[Statedef 184]
type = S
physics = N
anim = 184

[State 184, 1]
type = AssertSpecial
trigger1 = Time = [0,275]
flag = RoundNotOver

[State 184, 2]
type = PlaySnd
trigger1 = AnimElem = 8 || AnimElem = 17 || AnimElem = 25 || AnimElem = 33
value = 184,0

; Intro
[Statedef 190]
type = S

[State 190, 1]
type = ChangeState
trigger1 = p2name = "Chris" || p4name = "Chris"
value = 193

[State 190, 2]
type = ChangeState
trigger1 = p2name = "Yashiro Nanakase" || p4name = "Yashiro Nanakase"
value = 194

[State 190, 3]
type = ChangeState
trigger1 = p2name = "Kyo" || p4name = "Kyo"
trigger2 = p2name = "Kyo Kusanagi" || p4name = "Kyo Kusanagi"
trigger3 = p2name = "Benimaru" || p4name = "Benimaru"
trigger4 = p2name = "Benimaru Nikaido" || p4name = "Benimaru Nikaido"
trigger5 = p2name = "Ryo Sakazaki" || p4name = "Ryo Sakazaki"
trigger6 = p2name = "Terry Bogard" || p4name = "Terry Bogard"
trigger7 = p2name = "Andy Bogard" || p4name = "Andy Bogard"
trigger8 = p2name = "Robert Garcia" || p4name = "Robert Garcia"
trigger9 = p2name = "Kim Kaphwan" || p4name = "Kim Kaphwan"
trigger10 = p2name = "Iori Yagami" || p4name = "Iori Yagami"
trigger11 = p2name = "RBSKim" || p4name = "RBSKim"
trigger12 = p2name = "Kyo99" || p4name = "Kyo99"
value = 192

[State 190, 4]
type = ChangeState
trigger1 = Time = 0
value = 191

; Intro A
[Statedef 191]

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 191

[State 191, 2]
type = AssertSpecial
trigger1 = AnimElem = 11, < 0
flag = intro

[State 191, 3]
type = VarRandom
trigger1 = Time = 0
v = 2
range = 0,9

[State 191, 4]
type = VarSet
trigger1 = p2name = "Shermie" || p4name = "Shermie"
var(2) = 0

[State 191, 5]
type = PlaySnd
trigger1 = (Var(2) = [0,4]) && AnimElem = 4
value = 191,0

[State 191, 6]
type = PlaySnd
trigger1 = (Var(2) = [5,9]) && AnimElem = 4
value = 191,1

[State 191, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

; Intro vs. male
[Statedef 192]

[State 192, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 192

[State 192, 2]
type = AssertSpecial
trigger1 = AnimElem = 8, <= 40
flag = intro

[State 192, 3]
type = PlaySnd
trigger1 = AnimElem = 6
value = 192,0

[State 192, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

; Intro vs. Chris
[Statedef 193]

[State 193, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 193

[State 193, 2]
type = AssertSpecial
trigger1 = AnimElem = 9, < 0
flag = intro

[State 193, 3]
type = PlaySnd
trigger1 = AnimElem = 7
value = 193,0

[State 193, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

; Intro vs. Yashiro
[Statedef 194]

[State 194, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 194

[State 194, 2]
type = AssertSpecial
trigger1 = AnimElem = 9, < 0
flag = intro

[State 194, 3]
type = PlaySnd
trigger1 = AnimElem = 7
value = 193,0

[State 194, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

; Taunt
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195
ctrl = 0
velset = 0,0

[State 195, 1]
type = CtrlSet
trigger1 = AnimElem = 9
value = 1

[State 195, 2]
type = PlaySnd
trigger1 = AnimElem = 12
value = 195,0
channel = 5

[State 195, 3]
type = PlaySnd
trigger1 = AnimElem = 17
value = 195,1
channel = 5

[State 195, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

; Standing light punch
[Statedef 200]
type = S
movetype = A
physics = S
anim = 200
poweradd = IfElse((Var(1)),30,20)
velset = 0
ctrl = 0

[State 200, 1]
type = PlaySnd
trigger1 = Time = 0
value = 200,0

[State 200, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 200,1

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 30
animtype = light
guardflag = M
sparkno = S3100
guard.sparkno = S3150
sparkxy = -10,-100
hitsound = S200,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 8
ground.type = high
ground.slidetime = 9
ground.velocity = -6.2
air.velocity = -3,-3

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing light kick
[Statedef 220]
type = S
movetype = A
physics = S
anim = 220
poweradd = IfElse((Var(1)),30,20)
velset = 0
ctrl = 0

[State 220, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 220, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 200,1

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 20
animtype = light
guardflag = M
sparkno = S3100
guard.sparkno = S3150
sparkxy = -10,-60
hitsound = S220,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 8
ground.type = low
ground.slidetime = 9
ground.velocity = 0
air.velocity = -3,-3

[State 220, 4]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
damage = 10
animtype = light
guardflag = M
sparkno = S3100
guard.sparkno = S3150
sparkxy = -10,-85
hitsound = S220,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 8
ground.type = high
ground.slidetime = 9
ground.velocity = -6.5
air.velocity = -3,-3

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Shermie stand / Kourai
[Statedef 230]
type = S
movetype = A
physics = S
anim = 230
poweradd = IfElse((Var(1)),60,40)
velset = 0,0
ctrl = 0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,1
channel = 0

[State 230, 2]
type = PosAdd
trigger1 = AnimElem = 2 || AnimElem = 3 || AnimElem = 4 || AnimElem = 5 || AnimElem = 6 || AnimElem = 7 || AnimElem = 8 || AnimElem = 9 || AnimElem = 10 || AnimElem = 11
x = 8

[State 230, 3]
type = PlaySnd
trigger1 = AnimElem = 5
value = 220,0

[State 230, 4]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 70
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-95
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -12
air.velocity = -4,-3

[State 230, 5]
type = PlaySnd
trigger1 = AnimElem = 7
value = 52,0

[State 230, 5]
type = movehitreset
trigger1 = AnimElem =6,3

[State 230, 6]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = 70
animtype = hard
guardflag = H
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-65
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -12
air.velocity = -4,-3

[State 230, 7]
type = HitDef
trigger1 = AnimElem = 9 && MoveContact =0
attr = S, NA
damage = 70
animtype = hard
guardflag = H
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-45
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -12
air.velocity = -4,-3

[State 230, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Shermie stand / Kourai (linked)
[Statedef 231]
type = S
movetype = A
physics = S
anim = 230
poweradd = IfElse((Var(1)),60,40)
velset = 0,0
ctrl = 0

[State 231, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,1
channel = 0

[State 231, 2]
type = PosAdd
trigger1 = AnimElem = 2 || AnimElem = 3 || AnimElem = 4 || AnimElem = 5 || AnimElem = 6 || AnimElem = 7 || AnimElem = 8 || AnimElem = 9 || AnimElem = 10 || AnimElem = 11
x = 8

[State 231, 3]
type = PlaySnd
trigger1 = AnimElem = 5
value = 220,0

[State 231, 4]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 70
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-95
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -12
air.velocity = -4,-3

[State 231, 5]
type = PlaySnd
trigger1 = AnimElem = 7
value = 52,0

[State 231, 6]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = 70
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-65
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -12
air.velocity = -4,-3

[State 231, 7]
type = HitDef
trigger1 = AnimElem = 9 && MoveContact != 1
attr = S, NA
damage = 70
animtype = hard
guardflag = H
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-45
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -12
air.velocity = -4,-3

[State 231, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing hard punch
[Statedef 240]
type = S
movetype = A
physics = S
anim = 240
poweradd = IfElse((Var(1)),90,60)
velset = 0
ctrl = 0

[State 240, 1]
type = PlaySnd
trigger1 = Time = 0
value = 200,0

[State 240, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 240,1

[State 240, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = 120
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-105
hitsound = S240,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 240, 4]
type = HitDef
trigger1 = AnimElem = 8 && MoveContact=0
attr = S, NA
damage = 120
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-65
hitsound = S240,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing hard punch (close)
[Statedef 245]
type = S
movetype = A
physics = S
anim = 245
poweradd = IfElse((Var(1)),90,60)
velset = 0
ctrl = 0

[State 245, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 200,0

[State 245, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 240,1

[State 245, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 100
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-75
hitsound = S240,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 245, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing hard kick
[Statedef 260]
type = S
movetype = A
physics = S
anim = 260
poweradd = IfElse((Var(1)),90,60)
velset = 0
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 240,1

[State 260, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 120
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-105
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 260, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing knockdown attack
[Statedef 280]
type = S
movetype = A
physics = S
anim = 280
poweradd = IfElse((prevstateno = 150 || prevstateno = 152),-1000,IfElse((Var(1)),120,80))
velset = 0
ctrl = 0

[State 280, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 280, 2]
type = PlaySnd
trigger1 = Time = 0
value = 240,1

[State 280, 3]
type = nothitby
trigger1 = prevstateno = 150 || prevstateno = 152
value = SCA

[State 280, 3]
type = Pause
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
time = 6
movetime = 6

[State 280, 4]
type = EnvColor
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
time = 4
value = 255,255,255
under = 1

[State 280, 5]
type = Explod
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
anim = 3040
sprpriority = 4
postype = p1
pos = 0,-75
bindtime = 1
pausemovetime = -1

[State 280, 6]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = 120
getpower = IfElse((prevstateno = 150 || prevstateno = 152),20,100)
animtype = back
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-80
hitsound = S280,2
guardsound = S200,3
pausetime = 12,12
ground.velocity = -4,-4.5
air.velocity = -4,-4
fall = 1
fall.recover = 0

[State 280, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Crouching light punch
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400
poweradd = IfElse((Var(1)),30,20)
velset = 0
ctrl = 0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 0
value = 200,0

[State 400, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 200,1

[State 400, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage = 40
animtype = light
guardflag = L
sparkno = S3100
guard.sparkno = S3150
sparkxy = -10,-70
hitsound = S200,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 12
ground.type = high
ground.slidetime = 12
ground.velocity = -6.5
air.velocity = -2,-2

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Crouching light kick
[Statedef 420]
type = C
movetype = A
physics = C
anim = 420
poweradd = IfElse((Var(1)),30,20)
velset = 0
ctrl = 0

[State 420, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 420, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 200,1

[State 420, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = C, NA
damage = 40
animtype = light
guardflag = L
sparkno = S3100
guard.sparkno = S3150
sparkxy = -10,-15
hitsound = S220,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 12
ground.type = low
ground.slidetime = 12
ground.velocity = -6.5
air.velocity = -2,-2

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Crouching hard punch
[Statedef 440]
type = C
movetype = A
physics = C
anim = 440
poweradd = IfElse((Var(1)),90,60)
velset = 0
ctrl = 0

[State 440, 1]
type = PlaySnd
trigger1 = Time = 0
value = 200,0

[State 440, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 250
value = 240,1

[State 440, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage = 90
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-75
hitsound = S240,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 440, 3]
type = HitDef
trigger1 = AnimElem = 5 && MoveContact=0
attr = C, NA
damage = 90
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-110
hitsound = S240,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Crouching hard kick
[Statedef 460]
type = C
movetype = A
physics = C
anim = 460
poweradd = IfElse((Var(1)),90,60)
velset = 0
ctrl = 0

[State 460, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 460, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 250
value = 240,1

[State 460, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage = 100
animtype = back
guardflag = L
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-35
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = trip
ground.slidetime = 19
ground.velocity = -1,-5
air.velocity = -4,-3
fall = 1
fall.recover = 0

[State 460, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Jumping light punch
[Statedef 600]
type = A
movetype = A
physics = A
anim = 600
poweradd = IfElse((Var(1)),30,20)
ctrl = 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 0
value = 200,0

[State 600, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 200,1

[State 600, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
damage = 30
animtype = high
guardflag = H
sparkno = S3100
guard.sparkno = S3150
sparkxy = -10,-95
hitsound = S200,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 13
ground.type = high
ground.slidetime = 9
ground.velocity = -5
air.velocity = -3,-3

[State 600, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Jumping light kick
[Statedef 620]
type = A
movetype = A
physics = A
anim = 620
poweradd = IfElse((Var(1)),30,20)
ctrl = 0

[State 620, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 620, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 200,1

[State 620, 33]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 40
animtype = light
guardflag = H
sparkno = S3100
guard.sparkno = S3150
sparkxy = -10,-75
hitsound = S220,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 13
ground.type = high
ground.slidetime = 9
ground.velocity = -5
air.velocity = -3,-3

[State 620, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Jumping hard punch
[Statedef 640]
type = A
movetype = A
physics = A
anim = 640
poweradd = IfElse((Var(1)),90,60)
ctrl = 0

[State 640, 1]
type = PlaySnd
trigger1 = Time = 0
value = 200,0

[State 640, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 240,1

[State 640, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 90
animtype = hard
guardflag = H
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-45
hitsound = S240,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = low
ground.slidetime = 9
ground.velocity = -5
air.velocity = -3,-3

[State 640, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Jumping hard kick
[Statedef 660]
type = A
movetype = A
physics = A
anim = 660
poweradd = IfElse((Var(1)),90,60)
ctrl = 0

[State 660, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 660, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 240,1

[State 660, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 110
animtype = hard
guardflag = H
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-65
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = low
ground.slidetime = 9
ground.velocity = -5
air.velocity = -3,-3

[State 660, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Diagonal jumping hard kick
[Statedef 670]
type = A
movetype = A
physics = A
anim = 670
poweradd = IfElse((Var(1)),90,60)
ctrl = 0

[State 670, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 670, 2]
type = PlaySnd
trigger1 = Time = 0
trigger1 = random < 250
value = 240,1

[State 670, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
damage = 90
animtype = hard
guardflag = H
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-45
hitsound = S260,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = low
ground.slidetime = 9
ground.velocity = -5
air.velocity = -3,-3

[State 670, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Jumping knockdown attack
[Statedef 680]
type = A
movetype = A
physics = A
anim = 680
poweradd = IfElse((Var(1)),120,80)
ctrl = 0

[State 680, 1]
type = PlaySnd
trigger1 = Time = 0
value = 220,0

[State 680, 2]
type = PlaySnd
trigger1 = Time = 0
value = 240,1

[State 680, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 130
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-70
hitsound = S280,2
guardsound = S200,3
pausetime = 12,12
ground.velocity = -4,-4.5
air.velocity = -4,-4
fall = 1
fall.recover = 0

[State 680, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Power charge (initiate)
[Statedef 700]
type = S
movetype = I
physics = S
anim = 700
velset = 0
ctrl = 0

[State 700, 1]
type = PlaySnd
trigger1 = Time = 0
value = 700,0
channel = 0

[State 700, 2]
type = PlaySnd
trigger1 = Time = 0
value = 700,1
channel = 1

[State 700, 3]
type = PowerAdd
trigger1 = ((Time + 2) % 2) = 0
value = 5

[State 700, 4]
type = ChangeState
trigger1 = power >= 3000
value = 715

[State 700, 5]
type = ChangeState
triggerall = var(30)=0
triggerall = AnimElem = 2, >= 0
trigger1 = command != "hold_x"
trigger2 = command != "hold_a"
trigger3 = command != "hold_y"
value = 710

[State 700, 5]
type = ChangeState
triggerall = var(30)
triggerall = AnimElem = 2, >= 0
trigger1 = p2dist x<140
trigger2 = enemy,numproj>0
trigger3 = p2movetype=A && enemy,vel x>0
value = 710

[State 700, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 705

; Power charge (charging)
[Statedef 705]
type = S
movetype = I
physics = S
anim = 705

[State 705, 1]
type = PowerAdd
trigger1 = ((Time + 2) % 2) = 0
value = 8

[State 705, 2]
type = Explod
trigger1 = ((Time + 12) % 12) = 0
anim = 711
ID = 700
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1

[State 705, 3]
type = ChangeState
trigger1 = power >= 3000
value = 715

[State 705, 4]
type = ChangeState
triggerall = var(30)=0
trigger1 = command != "hold_x"
trigger2 = command != "hold_a"
trigger3 = command != "hold_y"
value = 710

[State 705, 4]
type = ChangeState
triggerall = var(30)
trigger1 = p2dist x<140
trigger2 = enemy,numproj>0
trigger3 = p2movetype=A && enemy,vel x>0
value = 710

; Power charge (end)
[Statedef 710]
type = S
movetype = I
physics = S
anim = 710

[State 710, 1]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 710, 2]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 710, 3]
type = RemoveExplod
trigger1 = Time = 0

[State 710, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Power full
[Statedef 715]
type = S
movetype = I
physics = S
anim = 715

[State 715, 1]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 715, 2]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 715, 3]
type = RemoveExplod
trigger1 = Time = 0

[State 715, 4]
type = Explod
trigger1 = Time = 0
anim = 720
postype = p1
pos = 0,0
sprpriority = 4
bindtime = 1
ownpal = 1

[State 715, 5]
type = EnvShake
trigger1 = Time = 0
time = 20

[State 715, 6]
type = PalFX
trigger1 = Time % 2
add = 64,64,64
time = 1

[State 715, 7]
type = PlaySnd
trigger1 = Time = 1
value = 700,2

[State 715, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Dodge
[Statedef 725]
type = S
movetype = I
physics = S
anim = 725
velset = 0
ctrl = 0

[State 725, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 37

[State 725, 2]
type = SprPriority
trigger1 = Time = 0
value = -2

[State 725, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 725, 4]
type = PlaySnd
trigger1 = Time = 1
value = 725,0
channel = 0

[State 725, 5]
type = ChangeState
triggerall = AnimElem = 4, >= 0
triggerall = AnimElem = 5, < 0
trigger1 = command = "x"
trigger2 = command = "a"
trigger3 = command = "y"
trigger4 = command = "b"
value = 730

[State 725, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Dodge attack
[Statedef 730]
type = S
movetype = A
physics = S
anim = 730
poweradd = 60

[State 730, 1]
type = HitBy
trigger1 = Time = 0
value = SCA
time = 3

[State 730, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
damage = 50
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-75
hitsound = S200,2
guardsound = S200,3
pausetime = 12,12
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 730, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Roll forward
[Statedef 750]
type = S
movetype = I
physics = S
anim = 750
poweradd = IfElse((prevstateno = 150 || prevstateno = 152),-500,0)
velset = 0
ctrl = 0

[State 750, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 24

[State 750, 2]
type = Pause
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
time = 6
movetime = 6

[State 750, 3]
type = EnvColor
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
time = 4
value = 255,255,255
under = 1

[State 750, 4]
type = Explod
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
anim = 3040
sprpriority = 4
postype = p1
pos = 0,-75
bindtime = 1
pausemovetime = -1

[State 750, 5]
type = AfterImage
trigger1 = Time = 3
time = 10
trans = add1
timegap = 1
framegap = 2
length = 8

[State 750, 6]
type = SprPriority
trigger1 = Time = 6
value = -2

[State 750, 7]
type = VelSet
trigger1 = Time = [6,22]
x = IfElse((prevstateno = 150 || prevstateno = 152),7,5)

[State 750, 8]
type = PlayerPush
trigger1 = Time = [6,22]
value = 0

[State 750, 9]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 750, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Roll backwards
[Statedef 775]
type = S
movetype = I
physics = S
anim = 775
poweradd = IfElse((prevstateno = 150 || prevstateno = 152),-500,0)
velset = 0
ctrl = 0

[State 775, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 24

[State 775, 2]
type = Pause
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
time = 6
movetime = 6

[State 775, 3]
type = EnvColor
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
time = 4
value = 255,255,255
under = 1

[State 775, 4]
type = Explod
trigger1 = Time = 0 && (prevstateno = 150 || prevstateno = 152)
anim = 3040
sprpriority = 4
postype = p1
pos = 0,-75
bindtime = 1
pausemovetime = -1

[State 775, 5]
type = AfterImage
trigger1 = Time = 3
time = 10
trans = add1
timegap = 1
framegap = 2
length = 8

[State 775, 6]
type = SprPriority
trigger1 = Time = 9
value = -2

[State 775, 7]
type = VelSet
trigger1 = Time = [9,25]
x = IfElse((prevstateno = 150 || prevstateno = 152),-7,-5)

[State 775, 8]
type = PlayerPush
trigger1 = Time = [9,25]
value = 0

[State 775, 9]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 775, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Shermie flash original / Bakurai (attempt)
[Statedef 800]
type = S
movetype = A
physics = S
anim = 800
velset = 0,0
ctrl = 0

[State 800, 1]
type = HitDef
trigger1 = Time = 1
attr = S, NT
hitflag = M
priority = 2, miss
sparkno = -1
numhits = 0
p1stateno = 810
p2facing = 1
p2stateno = 820

[State 800, 2]
type = PlaySnd
trigger1 = Time = 2
value = 800,1

[State 800, 3]
type = PosAdd
trigger1 = AnimElem = 4 || AnimElem = 5
x = 8

[State 800, 4]
type = PosAdd
trigger1 = AnimElem = 6
x = 12

[State 800, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Shermie flash original / Bakurai (hitting)
[Statedef 810]
type = S
movetype = I
physics = S
anim = 810

[State 810, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 2]
type = PosAdd
trigger1 = AnimElem = 2 || AnimElem = 3 || AnimElem = 4
x = 16

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 16,0

[State 810, 4]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
pos = 0,0

[State 810, 5]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 6, < 0
pos = -16,0

[State 810, 6]
type = Explod
trigger1 = AnimElem = 6
anim = 805
sprpriority = 1
postype = p1
pos = -16,-56
bindtime = 1

[State 810, 7]
type = PlaySnd
trigger1 = AnimElem = 6
value = 800,0

[State 810, 8]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 7, < 0
pos = -12,-55

[State 810, 9]
type = TargetBind
trigger1 = AnimElem = 7, >= 0 && AnimElem = 8, < 0
pos = -8,-54

[State 810, 10]
type = Width
trigger1 = AnimElem = 7
edge = 64,0

[State 810, 11]
type = TargetBind
trigger1 = AnimElem = 8, >= 0 && AnimElem = 9, < 0
pos = 0,-65

[State 810, 12]
type = PlaySnd
trigger1 = AnimElem = 8
value = 200,1

[State 810, 13]
type = TargetBind
trigger1 = AnimElem = 9, >= 0 && AnimElem = 10, < 0
pos = 8,-67

[State 810, 14]
type = PlaySnd
trigger1 = AnimElem = 9
value = 2100,1

[State 810, 15]
type = TargetBind
trigger1 = AnimElem = 10, >= 0 && AnimElem = 11, < 0
pos = 53,-53

[State 810, 16]
type = TargetBind
trigger1 = AnimElem = 11, >= 0 && AnimElem = 12, < 0
pos = 66,-22

[State 810, 17]
type = EnvShake
trigger1 = AnimElem = 11
time = 10
ampl = -6

[State 810, 18]
type = Explod
trigger1 = AnimElem = 11
anim = F61
postype = p1
pos = 66,0
bindtime = 1
sprpriority = 0

[State 810, 19]
type = PlaySnd
trigger1 = AnimElem = 11
value = 1120,1

[State 810, 20]
type = TargetLifeAdd
trigger1 = AnimElem = 11
value = -130

[State 810, 21]
type = PosAdd
trigger1 = AnimElem = 18
x = 42

[State 810, 22]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Shermie flash original / Bakurai (hit by)
[Statedef 820]
type = S
movetype = H
physics = N

[State 820, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

[State 820, 2]
type = VelSet
trigger1 = Time = 76
x = -4
y = -3

[State 820, 3]
type = VelAdd
trigger1 = Time > 75
y = .39

[State 820, 4]
type = ChangeAnim
trigger1 = Anim = 820 && AnimTime = 0
value = 5160

[State 820, 5]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; Front flash / Enrai (attempt)
[Statedef 850]
type = S
movetype = A
physics = S
anim = 850
velset = 0,0
ctrl = 0

[State 850, 1]
type = HitDef
trigger1 = Time = 1
attr = S, NT
hitflag = M
priority = 2, miss
sparkno = -1
numhits = 0
p1stateno = 860
p2facing = 1
p2stateno = 870

[State 850, 2]
type = PlaySnd
trigger1 = Time = 2
value = 800,1

[State 850, 3]
type = PosAdd
trigger1 = AnimElem = 4 || AnimElem = 5
x = 8

[State 850, 4]
type = PosAdd
trigger1 = AnimElem = 6
x = 12

[State 850, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Front flash / Enrai (hitting)
[Statedef 860]
type = S
movetype = I
physics = S
anim = 860

[State 860, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 860, 2]
type = Width
trigger1 = 1
edge = 48,32

[State 860, 3]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 45,-65

[State 860, 4]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 33,-62

[State 860, 5]
type = Explod
trigger1 = AnimElem = 2
anim = 805
sprpriority = 1
postype = p1
pos = 34,-66
bindtime = 1

[State 860, 6]
type = PlaySnd
trigger1 = AnimElem = 2
value = 800,0

[State 860, 7]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
pos = 29,-65

[State 860, 8]
type = PlaySnd
trigger1 = AnimElem = 3
value = 240,1

[State 860, 9]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
pos = 18,-97

[State 860, 10]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
pos = -18,-97

[State 860, 11]
type = PlaySnd
trigger1 = AnimElem = 5
value = 860,0

[State 860, 12]
type = TargetBind
trigger1 = AnimElem = 6
pos = -80,-92

[State 860, 13]
type = TargetLifeAdd
trigger1 = AnimElem = 6, = 2
value = -160

[State 860, 14]
type = PosAdd
trigger1 = AnimElem = 8
x = -32

[State 860, 15]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Front flash / Enrai (hit by)
[Statedef 870]
type = S
movetype = H
physics = N
velset = 0,0

[State 870, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 870

[State 870, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 875

; Front flash / Enrai (hit by, in the air)
[Statedef 875]
movetype = H
velset = 6,-4

[State 875, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 875

[State 875, 2]
type = VelAdd
trigger1 = 1
y = .4

[State 875, 3]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; Short jump
[Statedef 950]
type = A
movetype = I
physics = A
anim = 950

[State 950, 1]
type = VelSet
trigger1 = Time = 0
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-2.88,2.88))
y = -6.5

[State 950, 2]
type = VelSet
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-4.4,4.33))

[State 950, 3]
type = AfterImage
trigger1 = Time = 0 && Var(5) && Vel X != 0
time = 10
trans = add1
timegap = 1
framegap = 2
length = 8
palbright = 12,12,12
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State 950, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

; Light Axle spin kick (start)
[Statedef 1000]
type = S
movetype = I
physics = S
anim = 1000
poweradd = 100
velset = 0,0
ctrl = 0

[State 1000, 1]
type = NotHitBy
trigger1 = Time = 0
time = 4
value = SCA

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 0
value = 240,1

[State 1000, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1010

; Light Axle spin kick (in the air)
[Statedef 1010]
type = A
movetype = I
physics = N
anim = 1010
velset = 3,-5

[State 1010, 1]
type = NotHitBy
trigger1 = Time = 0
time = 12
value = SCA

[State 1010, 2]
type = PlaySnd
trigger1 = Time = 0
value = 40,1

[State 1010, 3]
type = VelAdd
trigger1 = Time > 0
y = .4

[State 1010, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1020

; Light Axle spin kick (land)
[Statedef 1020]
type = S
movetype = A
physics = S
anim = 1020
velset = 0,0

[State 1020, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1020, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1000,0

[State 1020, 3]
type = PlaySnd
trigger1 = Time = 0
value = 1000,1

[State 1020, 4]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 1020, 5]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
damage = 160,5
priority = 6
animtype = hard
guardflag = M
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-80
hitsound = S280,2
guardsound = S1000,3
pausetime = 12,12
ground.velocity = -4,-4.5
air.velocity = -4,-4
fall = 1
fall.recover = 0

[State 1020, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Axle spin kick (start)
[Statedef 1050]
type = S
movetype = I
physics = S
anim = 1050
poweradd = 120
velset = 0,0
ctrl = 0

[State 1050, 1]
type = NotHitBy
trigger1 = Time = 0
time = 6
value = SCA

[State 1050, 2]
type = PlaySnd
trigger1 = Time = 0
value = 240,1

[State 1050, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1060

; Hard Axle spin kick (in the air)
[Statedef 1060]
type = A
movetype = I
physics = N
anim = 1060
velset = 4,-6

[State 1060, 1]
type = NotHitBy
trigger1 = Time = 0
time = 14
value = SCA

[State 1060, 2]
type = PlaySnd
trigger1 = Time = 0
value = 40,1

[State 1060, 3]
type = VelAdd
trigger1 = Time > 0
y = .49

[State 1060, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1070

; Hard Axle spin kick (land)
[Statedef 1070]
type = S
movetype = A
physics = S
anim = 1070
velset = 0,0

[State 1070, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1070, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1000,0

[State 1070, 3]
type = PlaySnd
trigger1 = Time = 0
value = 1000,1

[State 1070, 4]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 1070, 5]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
damage = 170,5
priority = 6
animtype = hard
guardflag = M
sparkno = S3120
guard.sparkno = S3170
sparkxy = -10,-80
hitsound = S280,2
guardsound = S1000,3
pausetime = 12,12
ground.velocity = -4,-4.5
air.velocity = -4,-4
fall = 1
fall.recover = 0

[State 1070, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Shermie shoot (start)
[Statedef 1100]
type = S
movetype = A
physics = S
anim = 1100
poweradd = 100
velset = 0,0
ctrl = 0

[State 1100, 1]
type = VarSet
trigger1 = Time = 0
var(7) = IfElse((prevstateno = 200 || prevstateno = 220 || prevstateno = 231 || prevstateno = 240),1,0)

[State 1100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0
channel = 0

[State 1100, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1105

; Light Shermie shoot (dash)
[Statedef 1105]
type = S
movetype = A
physics = S
anim = 1105

[State 1105, 1]
type = VelSet
trigger1 = 1
x = 8

[State 1105, 2]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
loop = 1
channel = 1

[State 1105, 3]
type = ChangeState
trigger1 = p2bodydist x <= 32
value = 1115

[State 1105, 4]
type = ChangeState
trigger1 = Time = 10
value = 1110

; Light Shermie shoot (stop)
[Statedef 1110]
type = S
movetype = I
physics = S
anim = 1110
velset = 0,0

[State 1110, 1]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 1110, 2]
type = PlaySnd
trigger1 = Time = 0
value = 800,1

[State 1110, 3]
type = PlaySnd
trigger1 = Time = 0
value = 1110,0

[State 1110, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Shermie shoot (attack)
[Statedef 1115]
type = S
movetype = A
physics = S
anim = 1115
velset = 0,0

[State 1115, 1]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 1115, 2]
type = HitDef
triggerall = !var(32)
trigger1 = Time = 3 && Var(7) = 0
trigger1 = p2stateno != [120,151]
attr = S, ST
priority = 4, miss
hitflag = M
numhits = 0
sparkno = -1
numhits = 0
p1stateno = 1120
p2facing = 1
p2stateno = 1121

[State 1115, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 800,1

[State 1115, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Shermie shoot (hitting)
[Statedef 1120]
anim = 1120
physics = N

[State 1120, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1120, 2]
type = BindToTarget
trigger1 = AnimElem = 1, >= 0 && AnimElem = 10, < 0
pos = -4,43,head

[State 1120, 3]
type = Explod
trigger1 = Time = 0
anim = 1125
sprpriority = 1
postype = p1
pos = 0,-42
bindtime = 1

[State 1120, 4]
type = PlaySnd
trigger1 = Time = 0
value = 800,0

[State 1120, 5]
type = PlaySnd
trigger1 = Time = 0
value = 1120,0

[State 1120, 6]
type = PlaySnd
trigger1 = AnimElem = 4
value = 40,1

[State 1120, 7]
type = BindToTarget
trigger1 = AnimElem = 10, >= 0 && AnimElem = 11, < 0
pos = -4,63,head

[State 1120, 8]
type = BindToTarget
trigger1 = AnimElem = 11, >= 0 && AnimElem = 12, < 0
pos = -4,71,head

[State 1120, 9]
type = PosSet
trigger1 = AnimElem = 12
y = 0

[State 1120, 10]
type = TargetBind
trigger1 = AnimElem = 12
pos = 5,0

[State 1120, 11]
type = EnvShake
trigger1 = AnimElem = 12
time = 20
ampl = -8

[State 1120, 12]
type = TargetState
trigger1 = AnimElem = 12
value = 1122

[State 1120, 13]
type = Explod
trigger1 = AnimElem = 12
anim = 1130
sprpriority = -2
postype = p1
pos = 0,0
bindtime = -1

[State 1120, 14]
type = PlaySnd
trigger1 = AnimElem = 12
value = 1120,1

[State 1120, 15]
type = PlaySnd
trigger1 = AnimElem = 12
value = 1120,2

[State 1120, 16]
type = TargetLifeAdd
trigger1 = AnimElem = 12
value = -150

[State 1120, 17]
type = Explod
trigger1 = AnimElem = 12, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = 0,0
bindtime = 1

[State 1120, 18]
type = ChangeState
trigger1 = AnimTime = 0
value = 1140

; Getting hit by Shermie shoot (standing)
[Statedef 1121]
type = S
movetype = H
velset = 0,0

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 1121, 1]
type = Width
trigger1 = 1
edge = 0,15

[State 1121, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1121

; Getting hit by Shermie shoot (lying down)
[Statedef 1122]
movetype = H

[State 1122, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1122

[State 1122, 2]
type = VelSet
trigger1 = Time = 18
x = -3
y = -8

[State 1122, 3]
type = SelfState
trigger1 = Time = 18
value = 5101

; Light Shermie shoot (jumping back)
[Statedef 1140]
type = A
movetype = I
physics = N
anim = 1140
velset = -8,-6

[State 1140, 1]
type = VelAdd
trigger1 = Time > 0
y = .73

[State 1140, 2]
type = VelMul
trigger1 = Time > 0
x = .92

[State 1140, 3]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1145

; Light Shermie shoot (land)
[Statedef 1145]
type = S
physics = S
anim = 1145
velset = 0,0

[State 1145, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1145, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Shermie shoot (start)
[Statedef 1150]
type = S
movetype = A
physics = S
anim = 1150
poweradd = 120
velset = 0,0
ctrl = 0

[State 1150, 1]
type = VarSet
trigger1 = Time = 0
var(7) = IfElse((prevstateno = 200 || prevstateno = 220 || prevstateno = 231 || prevstateno = 240),1,0)

[State 1150, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0
channel = 0

[State 1150, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1155

; Hard Shermie shoot (dash)
[Statedef 1155]
type = S
movetype = A
physics = S
anim = 1155

[State 1155, 1]
type = VelSet
trigger1 = 1
x = 8

[State 1155, 2]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
loop = 1
channel = 1

[State 1155, 3]
type = ChangeState
trigger1 = p2bodydist x <= 15
value = 1165

[State 1155, 4]
type = ChangeState
trigger1 = Time = 14
value = 1160

; Hard Shermie shoot (stop)
[Statedef 1160]
type = S
movetype = I
physics = S
anim = 1160
velset = 0,0

[State 1160, 1]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 1160, 2]
type = PlaySnd
trigger1 = Time = 0
value = 800,1

[State 1160, 3]
type = PlaySnd
trigger1 = Time = 0
value = 1110,0

[State 1160, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Shermie shoot (attack)
[Statedef 1165]
type = S
movetype = A
physics = S
anim = 1165
velset = 0,0

[State 1165, 1]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 1165, 2]
type = HitDef
triggerall = !var(32)
trigger1 = Time = 3 && Var(7) = 0
trigger1 = p2stateno != [120,151]
attr = S, ST
priority = 4, miss
hitflag = M
numhits = 0
sparkno = -1
numhits = 0
p1stateno = 1170
p2facing = 1
p2stateno = 1121

[State 1165, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 800,1

[State 1165, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Shermie shoot (hitting)
[Statedef 1170]
anim = 1170
physics = N

[State 1170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1170, 2]
type = BindToTarget
trigger1 = AnimElem = 1, >= 0 && AnimElem = 10, < 0
pos = -4,43,head

[State 1170, 3]
type = Explod
trigger1 = Time = 0
anim = 1125
sprpriority = 1
postype = p1
pos = 0,-42
bindtime = 1

[State 1170, 4]
type = PlaySnd
trigger1 = Time = 0
value = 800,0

[State 1170, 5]
type = PlaySnd
trigger1 = Time = 0
value = 1120,0

[State 1170, 6]
type = PlaySnd
trigger1 = AnimElem = 4
value = 40,1

[State 1170, 7]
type = BindToTarget
trigger1 = AnimElem = 10, >= 0 && AnimElem = 11, < 0
pos = -4,63,head

[State 1170, 8]
type = BindToTarget
trigger1 = AnimElem = 11, >= 0 && AnimElem = 12, < 0
pos = -4,71,head

[State 1170, 9]
type = PosSet
trigger1 = AnimElem = 12
y = 0

[State 1170, 10]
type = TargetBind
trigger1 = AnimElem = 12
pos = 5,0

[State 1170, 11]
type = PosAdd
trigger1 = AnimElem = 12
x = -10

[State 1170, 12]
type = EnvShake
trigger1 = AnimElem = 12
time = 20
ampl = -8

[State 1170, 13]
type = TargetState
trigger1 = AnimElem = 12
value = 1122

[State 1170, 14]
type = Explod
trigger1 = AnimElem = 12
anim = 1130
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 1170, 15]
type = PlaySnd
trigger1 = AnimElem = 12
value = 1120,1

[State 1170, 16]
type = PlaySnd
trigger1 = AnimElem = 12
value = 1120,2

[State 1170, 17]
type = TargetLifeAdd
trigger1 = AnimElem = 12
value = -160

[State 1170, 18]
type = Explod
trigger1 = AnimElem = 12, = 2
anim = 1135
sprpriority = 6
postype = p1
pos = 0,0
bindtime = 1

[State 1170, 19]
type = ChangeState
trigger1 = AnimTime = 0
value = 1190

; Hard Shermie shoot (jumping back)
[Statedef 1190]
type = A
movetype = I
physics = N
anim = 1190
velset = -8,-6

[State 1190, 1]
type = VelAdd
trigger1 = Time > 0
y = .73

[State 1190, 2]
type = VelMul
trigger1 = Time > 0
x = .92

[State 1190, 3]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1145

; Hard Shermie shoot (land)
[Statedef 1145]
type = S
physics = S
anim = 1145
velset = 0,0

[State 1145, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1145, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Shermie whip (attack)
[Statedef 1200]
type = S
movetype = A
physics = S
anim = 1200
poweradd = 100
velset = 0,0
ctrl = 0

[State 1200, 1]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 1200, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1200,0

[State 1200, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000,1
ignorehitpause = 1
persistent = 0

[State 1200, 4]
type = HitDef
triggerall = !var(32)
trigger1 = AnimElem = 4
attr = S, ST
priority = 6, miss
hitflag = MA
guardflag = M
sparkno = S3120
guard.sparkno = S3170
sparkxy = -10,-96
hitsound = S240,2
guardsound = S1000,3
pausetime = 2,1
guard.hittime = 19
guard.slidetime = 19
guard.velocity = -10
airguard.velocity = -4,-3
p1stateno = 1210
p2facing = 1
p2stateno = 1220

[State 1200, 5]
type = PosAdd
trigger1 = AnimElem = 3 || AnimElem = 4
x = -16

[State 1200, 6]
type = PosAdd
trigger1 = AnimElem = 5 || AnimElem = 6
x = -8

[State 1200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Shermie whip (hitting)
[Statedef 1210]
type = S
movetype = I
physics = S
anim = 1210

[State 1210, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1210, 2]
type = Width
trigger1 = 1
edge = 15,15

[State 1210, 3]
type = PosAdd
trigger1 = AnimElem = 2 || AnimElem = 3
x = -8

[State 1210, 4]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 74,-85

[State 1210, 5]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 26,-97

[State 1210, 6]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
pos = 0,-74

[State 1210, 7]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
pos = -36,-49

[State 1210, 8]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
pos = -32,0

[State 1210, 9]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -90
kill = 0

[State 1210, 10]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1120,1

[State 1210, 11]
type = EnvShake
trigger1 = AnimElem = 5
time = 14
ampl = -4

[State 1210, 12]
type = Explod
trigger1 = AnimElem = 5
anim = 1130
sprpriority = -2
postype = p1
pos = -32,0
bindtime = 1

[State 1210, 13]
type = Explod
trigger1 = AnimElem = 5, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = -32,0
bindtime = 1

[State 1210, 14]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 8, < 0
pos = -49,0

[State 1210, 15]
type = TargetBind
trigger1 = AnimElem = 8, >= 0 && AnimElem = 9, < 0
pos = 17,-29

[State 1210, 16]
type = PlaySnd
trigger1 = AnimElem = 8
value = 800,0

[State 1210, 17]
type = Explod
trigger1 = AnimElem = 8
anim = 1125
sprpriority = 1
postype = p1
pos = 32,-20
bindtime = 1

[State 1210, 18]
type = TargetBind
trigger1 = AnimElem = 9, >= 0 && AnimElem = 10, < 0
pos = 33,-61

[State 1210, 19]
type = TargetBind
trigger1 = AnimElem = 10, >= 0 && AnimElem = 11, < 0
pos = 17,-57

[State 1210, 20]
type = TargetBind
trigger1 = AnimElem = 11, >= 0 && AnimElem = 12, < 0
pos = 22,-62

[State 1210, 21]
type = TargetBind
trigger1 = AnimElem = 12, >= 0 && AnimElem = 13, < 0
pos = 22,-74

[State 1210, 22]
type = PlaySnd
trigger1 = AnimElem = 12
value = 1200,0

[State 1210, 23]
type = TargetBind
trigger1 = AnimElem = 13, >= 0 && AnimElem = 14, < 0
pos = -5,-76

[State 1210, 24]
type = PlaySnd
trigger1 = AnimElem = 13
value = 860,0

[State 1210, 25]
type = TargetBind
trigger1 = AnimElem = 14, >= 0 && AnimElem = 15, < 0
pos = -25,-41

[State 1210, 26]
type = TargetBind
trigger1 = AnimElem = 15
pos = -72,-20

[State 1210, 27]
type = TargetState
trigger1 = AnimElem = 15
value = 1225

[State 1210, 28]
type = TargetLifeAdd
trigger1 = AnimElem = 15
value = -90

[State 1210, 29]
type = PosAdd
trigger1 = AnimElem = 18
x = -16

[State 1210, 30]
type = ChangeState
trigger1 = var(30)=0
trigger1 = Var(8) && Win != 1 && AnimElem = 16, = 1
trigger2 = var(30)
trigger2 = AnimElem = 16, = 1
value = 1500

[State 1210, 31]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Getting hit by Shermie whip (hit shake)
[Statedef 1220]
movetype = H
physics = N

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 1220, 1]
type = ChangeAnim
trigger1 = HitShakeOver = 0
value = Anim
elem = AnimElemNo(0)

[State 1220, 1]
type = ChangeAnim2
trigger1 = HitShakeOver = 1
value = 1220
persistent = 0

; Getting hit by Shermie whip (in the air)
[Statedef 1225]
movetype = H
physics = N
velset = 6,-4

[State 1225, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1225

[State 1225, 2]
type = VelAdd
trigger1 = 1
y = .47

[State 1225, 3]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; Hard Shermie whip (attack)
[Statedef 1250]
type = S
movetype = A
physics = S
anim = 1200
poweradd = 100
velset = 0,0
ctrl = 0

[State 1250, 1]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 1250, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1200,0

[State 1250, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000,1
ignorehitpause = 1
persistent = 0

[State 1250, 4]
type = HitDef
triggerall = !var(32)
trigger1 = AnimElem = 4
attr = S, ST
priority = 6, miss
hitflag = MA
guardflag = M
sparkno = S3120
guard.sparkno = S3170
sparkxy = -10,-96
hitsound = S240,2
guardsound = S1000,3
pausetime = 2,1
guard.hittime = 19
guard.slidetime = 19
guard.velocity = -10
airguard.velocity = -4,-3
p1stateno = 1260
p2facing = 1
p2stateno = 1220

[State 1250, 5]
type = PosAdd
trigger1 = AnimElem = 3 || AnimElem = 4
x = -16

[State 1250, 6]
type = PosAdd
trigger1 = AnimElem = 5 || AnimElem = 6
x = -8

[State 1250, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Shermie whip (hitting)
[Statedef 1260]
type = S
movetype = I
physics = S
anim = 1210

[State 1260, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1260, 2]
type = Width
trigger1 = 1
edge = 15,15

[State 1260, 3]
type = PosAdd
trigger1 = AnimElem = 2 || AnimElem = 3
x = -8

[State 1260, 4]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 74,-85

[State 1260, 5]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 26,-97

[State 1260, 6]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
pos = 0,-74

[State 1260, 7]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
pos = -36,-49

[State 1260, 8]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
pos = -32,0

[State 1260, 9]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -100
kill = 0

[State 1260, 10]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1120,1

[State 1260, 11]
type = EnvShake
trigger1 = AnimElem = 5
time = 14
ampl = -4

[State 1260, 12]
type = Explod
trigger1 = AnimElem = 5
anim = 1130
sprpriority = -2
postype = p1
pos = -32,0
bindtime = 1

[State 1260, 13]
type = Explod
trigger1 = AnimElem = 5, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = -32,0
bindtime = 1

[State 1260, 14]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 8, < 0
pos = -49,0

[State 1260, 15]
type = TargetBind
trigger1 = AnimElem = 8, >= 0 && AnimElem = 9, < 0
pos = 17,-29

[State 1260, 16]
type = PlaySnd
trigger1 = AnimElem = 8
value = 800,0

[State 1260, 17]
type = Explod
trigger1 = AnimElem = 8
anim = 1125
sprpriority = 1
postype = p1
pos = 32,-20
bindtime = 1

[State 1260, 18]
type = TargetBind
trigger1 = AnimElem = 9, >= 0 && AnimElem = 10, < 0
pos = 33,-61

[State 1260, 19]
type = TargetBind
trigger1 = AnimElem = 10, >= 0 && AnimElem = 11, < 0
pos = 17,-57

[State 1260, 20]
type = TargetBind
trigger1 = AnimElem = 11, >= 0 && AnimElem = 12, < 0
pos = 22,-62

[State 1260, 21]
type = TargetBind
trigger1 = AnimElem = 12, >= 0 && AnimElem = 13, < 0
pos = 22,-74

[State 1260, 22]
type = PlaySnd
trigger1 = AnimElem = 12
value = 1200,0

[State 1260, 23]
type = TargetBind
trigger1 = AnimElem = 13, >= 0 && AnimElem = 14, < 0
pos = -5,-76

[State 1260, 24]
type = PlaySnd
trigger1 = AnimElem = 13
value = 860,0

[State 1260, 25]
type = TargetBind
trigger1 = AnimElem = 14, >= 0 && AnimElem = 15, < 0
pos = -25,-41

[State 1260, 26]
type = TargetBind
trigger1 = AnimElem = 15
pos = -72,-20

[State 1260, 27]
type = TargetState
trigger1 = AnimElem = 15
value = 1225

[State 1260, 28]
type = TargetLifeAdd
trigger1 = AnimElem = 15
value = -90

[State 1260, 29]
type = PosAdd
trigger1 = AnimElem = 18
x = -16

[State 1260, 30]
type = ChangeState
trigger1 = Var(8) && Win != 1 && AnimElem = 18, = 1
value = 1500

[State 1260, 31]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Shermie spiral (attempt)
[Statedef 1300]
type = S
movetype = A
physics = S
anim = 1300
poweradd = 100
velset = 0,0
ctrl = 0

[State 1300, 1]
type = HitDef
triggerall = !var(32)
trigger1 = Time = 0
attr = S, ST
hitflag = M
priority = 4, miss
sparkno = -1
numhits = 0
p1stateno = 1310
p2facing = 1
p2stateno = 1320

[State nothitby]
type = nothitby
trigger1 = time=0
value=SCA
time=2

[State 1300, 2]
type = PlaySnd
trigger1 = Time = 2
value = 800,1

[State 1300, 3]
type = PosAdd
trigger1 = AnimElem = 4 || AnimElem = 5
x = 8

[State 1300, 4]
type = PosAdd
trigger1 = AnimElem = 6
x = 12

[State 1300, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Shermie spiral (hitting)
[Statedef 1310]
anim = 1310
physics = N

[State 1310, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1310, 2]
type = BindToTarget
trigger1 = 1
pos = -4,43,head

[State 1310, 3]
type = Explod
trigger1 = Time = 0
anim = 1305
sprpriority = 1
postype = p1
pos = 0,-42
bindtime = 1

[State 1310, 4]
type = PlaySnd
trigger1 = Time = 0
value = 800,0

[State 1310, 5]
type = PlaySnd
trigger1 = Time = 0
value = 1310,0

[State 1310, 6]
type = SprPriority
trigger1 = AnimElem = 10
value = -2

[State 1310, 7]
type = Explod
trigger1 = AnimElem = 12
anim = 1315
sprpriority = 4
postype = p1
pos = 0,0
bindtime = -1

[State 1310, 8]
type = PlaySnd
trigger1 = AnimElem = 13 || AnimElem = 14
value = 1310,1

[State 1310, 9]
type = SprPriority
trigger1 = AnimElem = 18
value = 4

[State 1310, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 1330

; Getting hit by Shermie spiral (standing)
[Statedef 1320]
type = S
movetype = H
physics = N
velset = 0,0

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 1320, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1320

; Shermie spiral (in the air)
[Statedef 1330]
anim = 1330
velset = 0,-3

[State 1330, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1330, 2]
type = TargetState
trigger1 = Time = 0
value = 1340

[State 1330, 3]
type = VelAdd
trigger1 = 1
y = .35

[State 1330, 4]
type = TargetBind
trigger1 = 1
pos = -10,-35

[State 1330, 5]
type = PlaySnd
trigger1 = Time = 0
value = 1330,0

[State 1330, 6]
type = PlaySnd
trigger1 = Time = 0
value = 1330,1

[State 1330, 7]
type = ChangeState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 1350

; Getting hit by Shermie spiral (in the air)
[Statedef 1340]
movetype = H

[State 1340, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1340

; Shermie spiral (land)
[Statedef 1350]
anim = 1350
physics = S
velset = 0,0

[State 1350, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1350, 2]
type = TargetState
trigger1 = Time = 0
value = 1360

[State 1350, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1350, 4]
type = EnvShake
trigger1 = Time = 0
time = 20
ampl = -8

[State 1350, 5]
type = PlaySnd
trigger1 = Time = 0
value = 1120,1

[State 1350, 6]
type = TargetLifeAdd
trigger1 = Time = 0
value = -220

[State 1350, 7]
type = Explod
trigger1 = Time = 0
anim = 1130
sprpriority = -2
postype = p1
pos = -40,0
bindtime = 1

[State 1350, 8]
type = Explod
trigger1 = Time = 4
anim = 1135
sprpriority = 6
postype = p1
pos = -40,0
bindtime = 1

[State 1350, 9]
type = TargetBind
trigger1 = AnimElem = 2, < 0
pos = -40,0

[State 1350, 10]
type = ChangeState
trigger1 = var(30)=0
trigger1 = Var(8) && Win != 1 && Time = 30
trigger2 = var(30)
trigger2 = Time = 30
value = 1500

[State 1350, 11]
type = Turn
trigger1 = AnimTime = 0

[State 1350, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Getting hit by Shermie spiral (on the ground)
[Statedef 1360]
movetype = H
velset = 0,0

[State 1360, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1360

[State 1360, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1360, 3]
type = VelSet
trigger1 = Anim = 1360 && AnimElem = 3
x = 4
y = -5

[State 1360, 4]
type = VelAdd
trigger1 = Time > 21
y = .41

[State 1360, 5]
type = ChangeAnim
trigger1 = Anim = 1360 && AnimTime = 0
value = 5160

[State 1360, 6]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; Light Shermie clutch (start)
[Statedef 1400]
type = S
movetype = A
physics = S
anim = 1400
poweradd = 120
velset = 0,0
ctrl = 0

[State 1400, 1]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 1400, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1400,0

[State 1400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1405

; Light Shermie clutch (in the air)
[Statedef 1405]
type = A
movetype = A
physics = N
anim = 1405
velset = 3,-7

[State 1405, 1]
type = VelAdd
trigger1 = Time > 0
y = .468

[State 1405, 2]
type = PlaySnd
trigger1 = Time = 0
value = 40,1

[State 1405, 3]
type = HitDef
trigger1 = AnimElem = 3, = 1
attr = A, ST
hitflag = A
priority = 3, miss
sparkno = -1
numhits = 0
p1stateno = 1420
p2facing = 1
p2stateno = 1430

[State 1405, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1410

; Light Shermie clutch (land)
[Statedef 1410]
type = S
movetype = I
physics = S
anim = 1410
velset = 0,0

[State 1410, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1410, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 1410, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Shermie clutch (hitting)
[Statedef 1420]
type = A
movetype = I
physics = N
anim = 1420
velset = 0,0

[State 1420, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1420, 2]
type = Explod
trigger1 = Time = 0
anim = 1305
sprpriority = 1
postype = p1
pos = 48,-58
bindtime = 1

[State 1420, 3]
type = PlaySnd
trigger1 = Time = 0
value = 800,0

[State 1420, 4]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 48,-57

[State 1420, 5]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 20,-41

[State 1420, 6]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 6, < 0
pos = 19,-59

[State 1420, 7]
type = TargetBind
trigger1 = AnimElem = 6, >= 0
pos = 19,-49

[State 1420, 8]
type = VelAdd
trigger1 = Time >= 30
y = .35

[State 1420, 9]
type = PlaySnd
trigger1 = AnimElem = 6, = 1
value = 1330,1
persistent = 0

[State 1420, 10]
type = ChangeState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 1425

; Light Shermie clutch (hitting, on the ground)
[Statedef 1425]
type = S
movetype = I
physics = S
anim = 1425
velset = 0,0

[State 1425, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1425, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1425, 3]
type = TargetState
trigger1 = Time = 0
value = 1435

[State 1425, 4]
type = EnvShake
trigger1 = Time = 0
time = 20
ampl = -8

[State 1425, 5]
type = PlaySnd
trigger1 = Time = 0
value = 1120,1

[State 1425, 6]
type = Explod
trigger1 = Time = 0
anim = 1130
sprpriority = -2
postype = p1
pos = 40,0
bindtime = 1

[State 1425, 7]
type = Explod
trigger1 = Time = 4
anim = 1135
sprpriority = 6
postype = p1
pos = 40,0
bindtime = 1

[State 1425, 8]
type = TargetLifeAdd
trigger1 = Time = 0
value = -160

[State 1425, 9]
type = TargetBind
trigger1 = AnimElem = 2, < 0
pos = 40,0

[State 1425, 10]
type = ChangeState
trigger1 = AnimElem = 5, = 1 && Var(8)
value = 1500

[State 1425, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Shermie clutch (hit by)
[Statedef 1430]
type = A
movetype = H
physics = N
velset = 0,0

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 1430, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1430

; Light Shermie clutch (hit by, on the ground)
[Statedef 1435]
movetype = H

[State 1435, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1435

[State 1435, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1435, 3]
type = VelSet
trigger1 = Time = 21
x = -4
y = -4

[State 1435, 4]
type = VelAdd
trigger1 = Time > 21
y = .49

[State 1435, 5]
type = ChangeAnim
trigger1 = Anim = 1435 && AnimTime = 0
value = 5160

[State 1435, 6]
type = Turn
trigger1 = Anim = 5160
persistent = 0

[State 1435, 7]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; Hard Shermie clutch (start)
[Statedef 1450]
type = S
movetype = A
physics = S
anim = 1450
poweradd = 140
velset = 0,0
ctrl = 0

[State 1450, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1450, 2]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 1450, 3]
type = PlaySnd
trigger1 = Time = 0
value = 1400,0

[State 1450, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 1455

; Hard Shermie clutch (in the air)
[Statedef 1455]
type = A
movetype = A
physics = N
anim = 1455
velset = 3,-9

[State 1455, 1]
type = VelAdd
trigger1 = Time > 0
y = .46

[State 1455, 2]
type = NotHitBy
trigger1 = Time = 0
time = 2
value = SCA

[State 1455, 3]
type = PlaySnd
trigger1 = Time = 0
value = 40,1

[State 1455, 4]
type = HitDef
trigger1 = AnimElem = 4, = 1
attr = A, ST
hitflag = A
priority = 3, miss
sparkno = -1
numhits = 0
p1stateno = 1470
p2facing = 1
p2stateno = 1480

[State 1455, 5]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1460

; Hard Shermie clutch (land)
[Statedef 1460]
type = S
movetype = I
physics = S
anim = 1460
velset = 0,0

[State 1460, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1460, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 1460, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Shermie clutch (hitting)
[Statedef 1470]
type = A
movetype = I
physics = N
anim = 1420
velset = 0,0

[State 1470, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1470, 2]
type = Explod
trigger1 = Time = 0
anim = 1305
sprpriority = 1
postype = p1
pos = 48,-58
bindtime = 1

[State 1470, 3]
type = PlaySnd
trigger1 = Time = 0
value = 800,0

[State 1470, 4]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 48,-57

[State 1470, 5]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 20,-41

[State 1470, 6]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 6, < 0
pos = 19,-59

[State 1470, 7]
type = TargetBind
trigger1 = AnimElem = 6, >= 0
pos = 19,-49

[State 1470, 8]
type = VelAdd
trigger1 = Time >= 30
y = .35

[State 1470, 9]
type = PlaySnd
trigger1 = AnimElem = 6, = 1
value = 1330,1
persistent = 0

[State 1470, 10]
type = ChangeState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 1475

; Hard Shermie clutch (hitting, on the ground)
[Statedef 1475]
type = S
movetype = I
physics = S
anim = 1425
velset = 0,0

[State 1475, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1475, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1475, 3]
type = TargetState
trigger1 = Time = 0
value = 1435

[State 1475, 4]
type = EnvShake
trigger1 = Time = 0
time = 20
ampl = -8

[State 1475, 5]
type = PlaySnd
trigger1 = Time = 0
value = 1120,1

[State 1475, 6]
type = Explod
trigger1 = Time = 0
anim = 1130
sprpriority = -2
postype = p1
pos = 40,0
bindtime = 1

[State 1475, 7]
type = Explod
trigger1 = Time = 4
anim = 1135
sprpriority = 6
postype = p1
pos = 40,0
bindtime = 1

[State 1475, 8]
type = TargetLifeAdd
trigger1 = Time = 0
value = -170

[State 1475, 9]
type = TargetBind
trigger1 = AnimElem = 2, < 0
pos = 40,0

[State 1475, 10]
type = ChangeState
trigger1 = AnimElem = 5, = 1 && Var(8)
value = 1500

[State 1475, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Shermie clutch (hit by)
[Statedef 1480]
type = A
movetype = H
physics = N
velset = 0,0

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 1480, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1430

; Hard Shermie clutch (hit by, on the ground)
[Statedef 1485]
movetype = H

[State 1485, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1435

[State 1485, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1485, 3]
type = VelSet
trigger1 = Time = 21
x = -4
y = -4

[State 1485, 4]
type = VelAdd
trigger1 = Time > 21
y = .49

[State 1485, 5]
type = ChangeAnim
trigger1 = Anim = 1435 && AnimTime = 0
value = 5160

[State 1485, 6]
type = Turn
trigger1 = Anim = 5160
persistent = 0

[State 1485, 7]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; Shermie cute (running)
[Statedef 1500]
type = S
movetype = I
physics = S
anim = 1500

[State 1500, 1]
type = VelSet
trigger1 = 1
x = 8

[State 1500, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1500, 3]
type = Turn
trigger1 = Time = 0
trigger1 = prevstateno = 1210 || prevstateno = 1260 || prevstateno = 1350

[State 1500, 4]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 1
loop = 1

[State 1500, 5]
type = ChangeState
trigger1 = p2bodydist x <= 10
value = 1510

; Shermie cute (attack)
[Statedef 1510]
type = S
movetype = A
physics = S
anim = 1510

[State 1510, 1]
type = NotHitBy
trigger1 = Time = 0
time = 11
value = SCA

[State 1510, 2]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 1510, 3]
type = VelSet
trigger1 = AnimElem = 8, < 0
x = 4

[State 1510, 4]
type = PlaySnd
trigger1 = Time = 0
value = 1000,1

[State 1510, 5]
type = PlaySnd
trigger1 = Time = 0
value = 1500,0

[State 1510, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 1510, 7]
type = HitDef
trigger1 = AnimElem = 8
attr = S, SA
damage = 50
numhits = 0
animtype = hard
hitflag = D
sparkno = S3120
guard.sparkno = S3160
sparkxy = -10,-20
pausetime = 12,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
p2stateno = 1520

[State 1510, 8]
type = PlaySnd
trigger1 = AnimElem = 8, = 1 && MoveHit
value = 1120,1
ignorehitpause = 1
persistent = 0

[State 1510, 9]
type = PlaySnd
trigger1 = AnimElem = 8, = 1 && MoveHit
value = 1120,2
ignorehitpause = 1
persistent = 0

[State 1510, 10]
type = PosAdd
trigger1 = AnimElem = 13 || AnimElem = 16
x = -16

[State 1510, 11]
type = PosAdd
trigger1 = AnimElem = 14 || AnimElem = 17
x = -8

[State 1510, 12]
type = PosAdd
trigger1 = AnimElem = 15
x = -12

[State 1510, 13]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Shermie cute (hit by)
[Statedef 1520]
movetype = H
physics = N

[State 1520, 1]
type = ChangeAnim2
trigger1 = Time >= 0
value = 1520

[State 1520, 2]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 1520, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1520, 4]
type = ChangeState
trigger1 = HitShakeOver
value = 1525

; Shermie cute (hit by, in the air)
[Statedef 1525]
movetype = H
velset = 4,-4

[State 1525, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5160

[State 1515, 2]
type = VelAdd
trigger1 = 1
y = .47

[State 1525, 3]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; DM Shermie carnival (attempt)
[Statedef 2100]
type = S
movetype = A
physics = S
anim = 2100
poweradd = -1000
velset = 0,0
ctrl = 0

[State 2100, 1]
type = SuperPause
trigger1 = Time = 0
time = 29
movetime = 29
anim = -1

[State 2100, 2]
type = NotHitBy
trigger1 = Time = 0
time = 37
value = SCA

[State 2100, 3]
type = PlaySnd
trigger1 = Time = 0
value = 3000,0

[State 2100, 4]
type = Explod
trigger1 = Time = 5
anim = 3000
postype = p1
pos = -4,-134
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 2100, 5]
type = Explod
trigger1 = Time = 13
anim = 3010
postype = p1
pos = -4,-134
sprpriority = 4
bindtime = -1
supermovetime = -1

[State 2100, 6]
type = HitDef
trigger1 = !var(32)
trigger1 = AnimElem = 8, = 3
attr = S, HT
hitflag = M
priority = 5, miss
sparkno = -1
numhits = 0
p1stateno = 2110
p2facing = 1
p2stateno = 2120

[State 2100, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; DM Shermie carnival (hitting)
[Statedef 2110]
type = S
movetype = I
physics = S
anim = 2110

[State 2110, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2110, 2]
type = Width
trigger1 = AnimElem = 29, < 0
edge = 68,68

[State 2110, 3]
type = Explod
trigger1 = Time = 0
anim = 1305
sprpriority = 1
postype = p1
pos = 34,-52
bindtime = 1

[State 2110, 4]
type = PlaySnd
trigger1 = Time = 0
value = 800,0

[State 2110, 5]
type = PlaySnd
trigger1 = Time = 0
value = 2100,0

[State 2110, 6]
type = AfterImage
trigger1 = Time = 0
trans = add1
time = 192
timegap = 1
framegap = 3
length = 8

[State 2110, 7]
type = EnvColor
trigger1 = Time = 1 || Time = 43 || Time = 99
time = 1
value = 255,255,255
under = 1

[State 2110, 8]
type = AssertSpecial
trigger1 = Time = 1 || Time = 43 || Time = 99
flag = NoFG

[State 2110, 9]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 34,-65

[State 2110, 10]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 17,-57

[State 2110, 11]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
pos = 22,-62

[State 2110, 12]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
pos = 22,-74

[State 2110, 13]
type = PlaySnd
trigger1 = AnimElem = 4 || AnimElem = 16
value = 2100,1

[State 2110, 14]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
pos = -5,-76

[State 2110, 15]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 7, < 0
pos = -25,-41

[State 2110, 16]
type = TargetBind
trigger1 = AnimElem = 7, >= 0 && AnimElem = 9, < 0
pos = -60,0

[State 2110, 17]
type = Explod
trigger1 = AnimElem = 7
anim = 1130
sprpriority = -2
postype = p1
pos = -60,0
bindtime = 1

[State 2110, 18]
type = Explod
trigger1 = AnimElem = 7, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = -60,0
bindtime = 1

[State 2110, 19]
type = EnvShake
trigger1 = AnimElem = 7 || AnimElem = 19
time = 14
ampl = -8

[State 2110, 20]
type = PlaySnd
trigger1 = AnimElem = 7 || AnimElem = 19
value = 1120,1

[State 2110, 21]
type = PlaySnd
trigger1 = AnimElem = 7 || AnimElem = 19
value = 1120,2

[State 2110, 22]
type = TargetLifeAdd
trigger1 = AnimElem = 7 || AnimElem = 19 || AnimElem = 30
value = -120
kill = IfElse(AnimElem = 30, < 0,0,1)

[State 2110, 23]
type = TargetBind
trigger1 = AnimElem = 9, >= 0 && AnimElem = 10, < 0
pos = -44,0

[State 2110, 24]
type = TargetBind
trigger1 = AnimElem = 10, >= 0 && AnimElem = 12, < 0
pos = -32,0

[State 2110, 25]
type = TargetBind
trigger1 = AnimElem = 12, >= 0 && AnimElem = 13, < 0
pos = -35,-29

[State 2110, 26]
type = TargetBind
trigger1 = AnimElem = 13, >= 0 && AnimElem = 14, < 0
pos = -33,-61

[State 2110, 27]
type = TargetBind
trigger1 = AnimElem = 14, >= 0 && AnimElem = 15, < 0
pos = -17,-57

[State 2110, 28]
type = TargetBind
trigger1 = AnimElem = 15, >= 0 && AnimElem = 16, < 0
pos = -22,-62

[State 2110, 29]
type = TargetBind
trigger1 = AnimElem = 16, >= 0 && AnimElem = 17, < 0
pos = -22,-74

[State 2110, 30]
type = TargetBind
trigger1 = AnimElem = 17, >= 0 && AnimElem = 18, < 0
pos = 5,-76

[State 2110, 31]
type = TargetBind
trigger1 = AnimElem = 18, >= 0 && AnimElem = 19, < 0
pos = 25,-41

[State 2110, 32]
type = TargetBind
trigger1 = AnimElem = 19, >= 0 && AnimElem = 21, < 0
pos = 60,0

[State 2110, 33]
type = Explod
trigger1 = AnimElem = 19
anim = 1130
sprpriority = -2
postype = p1
pos = 60,0
bindtime = 1

[State 2110, 34]
type = Explod
trigger1 = AnimElem = 19, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = 60,0
bindtime = 1

[State 2110, 35]
type = TargetBind
trigger1 = AnimElem = 21, >= 0 && AnimElem = 22, < 0
pos = 44,0

[State 2110, 36]
type = TargetBind
trigger1 = AnimElem = 22, >= 0 && AnimElem = 24, < 0
pos = 32,0

[State 2110, 37]
type = TargetBind
trigger1 = AnimElem = 24, >= 0 && AnimElem = 25, < 0
pos = 35,-29

[State 2110, 38]
type = TargetBind
trigger1 = AnimElem = 25, >= 0 && AnimElem = 26, < 0
pos = 42,-66

[State 2110, 39]
type = TargetBind
trigger1 = AnimElem = 26, >= 0 && AnimElem = 27, < 0
pos = 34,-62

[State 2110, 40]
type = TargetBind
trigger1 = AnimElem = 27, >= 0 && AnimElem = 28, < 0
pos = 26,-69

[State 2110, 41]
type = TargetBind
trigger1 = AnimElem = 28, >= 0 && AnimElem = 29, < 0
pos = 24,-91

[State 2110, 42]
type = TargetBind
trigger1 = AnimElem = 29, >= 0 && AnimElem = 30, < 0
pos = -18,-89

[State 2110, 43]
type = PlaySnd
trigger1 = AnimElem = 29
value = 860,0

[State 2110, 44]
type = TargetBind
trigger1 = AnimElem = 30
pos = -71,-100

[State 2110, 45]
type = TargetState
trigger1 = AnimElem = 30
value = 2125

[State 2110, 46]
type = PosAdd
trigger1 = AnimElem = 32
x = -32

[State 2110, 47]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; DM Shermie carnival (hit by)
[Statedef 2120]
movetype = H

[State 2120, 1]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 2120, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 2120

; DM Shermie carnival (hit by, in the air)
[Statedef 2125]
movetype = H
physics = N
velset = 7,-4

[State 2125, 1]
type = VelAdd
trigger1 = 1
y = .45

[State 2125, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 2125

[State 2125, 3]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; SDM Shermie carnival (attempt)
[Statedef 2150]
type = S
movetype = A
physics = S
anim = 2150
poweradd = -2000
velset = 0,0
ctrl = 0

[State 2150, 1]
type = SuperPause
trigger1 = Time = 0
time = 29
movetime = 29
anim = -1

[State 2150, 2]
type = NotHitBy
trigger1 = Time = 0
time = 37
value = SCA

[State 2150, 3]
type = PlaySnd
trigger1 = Time = 0
value = 3000,0

[State 2150, 4]
type = Explod
trigger1 = Time = 5
anim = 3020
postype = p1
pos = -4,-134
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 2150, 5]
type = Explod
trigger1 = Time = 13
anim = 3030
postype = p1
pos = -4,-134
sprpriority = 4
bindtime = -1
supermovetime = -1

[State 2150, 6]
type = HitDef
trigger1 = !var(32)
trigger1 = AnimElem = 8, = 3
attr = S, HT
ID = 2150
hitflag = M
priority = 5, miss
sparkno = -1
numhits = 0
p1stateno = 2160
p2facing = 1
p2stateno = 2170

[State 2150, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; SDM Shermie carnival (hitting)
[Statedef 2160]
type = S
movetype = I
physics = S
anim = 2160

[State 2160, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2160, 2]
type = Width
trigger1 = AnimElem = 53, < 0
edge = 68,68

[State 2160, 3]
type = Explod
trigger1 = Time = 0
anim = 1305
sprpriority = 1
postype = p1
pos = 34,-52
bindtime = 1

[State 2160, 4]
type = PlaySnd
trigger1 = Time = 0
value = 800,0

[State 2160, 5]
type = PlaySnd
trigger1 = Time = 0
value = 2100,0

[State 2160, 6]
type = AfterImage
trigger1 = Time = 0
trans = add1
time = 284
timegap = 1
framegap = 3
length = 8

[State 2160, 7]
type = EnvColor
trigger1 = Time = 1 || Time = 43 || Time = 99 || Time = 153 || Time = 207
time = 1
value = 255,255,255
under = 1

[State 2160, 8]
type = AssertSpecial
trigger1 = Time = 1 || Time = 43 || Time = 99 || Time = 153 || Time = 207
flag = NoFG

[State 2160, 9]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
trigger2 = AnimElem = 25, >= 0 && AnimElem = 26, < 0
pos = 34,-65

[State 2160, 10]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
trigger2 = AnimElem = 26, >= 0 && AnimElem = 27, < 0
pos = 17,-57

[State 2160, 11]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
trigger2 = AnimElem = 27, >= 0 && AnimElem = 28, < 0
pos = 22,-62

[State 2160, 12]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
trigger2 = AnimElem = 28, >= 0 && AnimElem = 29, < 0
pos = 22,-74

[State 2160, 13]
type = PlaySnd
trigger1 = AnimElem = 4 || AnimElem = 16 || AnimElem = 28 || AnimElem = 40
value = 2100,1

[State 2160, 14]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
trigger2 = AnimElem = 29, >= 0 && AnimElem = 30, < 0
pos = -5,-76

[State 2160, 15]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 7, < 0
trigger2 = AnimElem = 30, >= 0 && AnimElem = 31, < 0
pos = -25,-41

[State 2160, 16]
type = TargetBind
trigger1 = AnimElem = 7, >= 0 && AnimElem = 9, < 0
trigger2 = AnimElem = 31, >= 0 && AnimElem = 33, < 0
pos = -60,0

[State 2160, 17]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 31
anim = 1130
sprpriority = -2
postype = p1
pos = -60,0
bindtime = 1

[State 2160, 18]
type = Explod
trigger1 = AnimElem = 7, = 4
trigger2 = AnimElem = 31, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = -60,0
bindtime = 1

[State 2160, 19]
type = EnvShake
trigger1 = AnimElem = 7 || AnimElem = 19 || AnimElem = 31 || AnimElem = 43
time = 14
ampl = -8

[State 2160, 20]
type = PlaySnd
trigger1 = AnimElem = 7 || AnimElem = 19 || AnimElem = 31 || AnimElem = 43
value = 1120,1

[State 2160, 21]
type = PlaySnd
trigger1 = AnimElem = 7 || AnimElem = 19 || AnimElem = 31 || AnimElem = 43
value = 1120,2

[State 2160, 22]
type = TargetLifeAdd
trigger1 = AnimElem = 7 || AnimElem = 19 || AnimElem = 31 || AnimElem = 43
value = -100
kill = 0

[State 2160, 23]
type = TargetBind
trigger1 = AnimElem = 9, >= 0 && AnimElem = 10, < 0
trigger2 = AnimElem = 33, >= 0 && AnimElem = 34, < 0
pos = -44,0

[State 2160, 24]
type = TargetBind
trigger1 = AnimElem = 10, >= 0 && AnimElem = 12, < 0
trigger2 = AnimElem = 34, >= 0 && AnimElem = 36, < 0
pos = -32,0

[State 2160, 25]
type = TargetBind
trigger1 = AnimElem = 12, >= 0 && AnimElem = 13, < 0
trigger2 = AnimElem = 36, >= 0 && AnimElem = 37, < 0
pos = -35,-29

[State 2160, 26]
type = TargetBind
trigger1 = AnimElem = 13, >= 0 && AnimElem = 14, < 0
trigger2 = AnimElem = 37, >= 0 && AnimElem = 38, < 0
pos = -33,-61

[State 2160, 27]
type = TargetBind
trigger1 = AnimElem = 14, >= 0 && AnimElem = 15, < 0
trigger2 = AnimElem = 38, >= 0 && AnimElem = 39, < 0
pos = -17,-57

[State 2160, 28]
type = TargetBind
trigger1 = AnimElem = 15, >= 0 && AnimElem = 16, < 0
trigger2 = AnimElem = 39, >= 0 && AnimElem = 40, < 0
pos = -22,-62

[State 2160, 29]
type = TargetBind
trigger1 = AnimElem = 16, >= 0 && AnimElem = 17, < 0
trigger2 = AnimElem = 40, >= 0 && AnimElem = 41, < 0
pos = -22,-74

[State 2160, 30]
type = TargetBind
trigger1 = AnimElem = 17, >= 0 && AnimElem = 18, < 0
trigger2 = AnimElem = 41, >= 0 && AnimElem = 42, < 0
pos = 5,-76

[State 2160, 31]
type = TargetBind
trigger1 = AnimElem = 18, >= 0 && AnimElem = 19, < 0
trigger2 = AnimElem = 42, >= 0 && AnimElem = 43, < 0
pos = 25,-41

[State 2160, 32]
type = TargetBind
trigger1 = AnimElem = 19, >= 0 && AnimElem = 21, < 0
trigger2 = AnimElem = 43, >= 0 && AnimElem = 45, < 0
pos = 60,0

[State 2160, 33]
type = Explod
trigger1 = AnimElem = 19
trigger2 = AnimElem = 43
anim = 1130
sprpriority = -2
postype = p1
pos = 60,0
bindtime = 1

[State 2160, 34]
type = Explod
trigger1 = AnimElem = 19, = 4
trigger2 = AnimElem = 43, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = 60,0
bindtime = 1

[State 2160, 35]
type = TargetBind
trigger1 = AnimElem = 21, >= 0 && AnimElem = 22, < 0
trigger2 = AnimElem = 45, >= 0 && AnimElem = 46, < 0
pos = 44,0

[State 2160, 36]
type = TargetBind
trigger1 = AnimElem = 22, >= 0 && AnimElem = 24, < 0
trigger2 = AnimElem = 46, >= 0 && AnimElem = 48, < 0
pos = 32,0

[State 2160, 37]
type = TargetBind
trigger1 = AnimElem = 24, >= 0 && AnimElem = 25, < 0
trigger2 = AnimElem = 48, >= 0 && AnimElem = 49, < 0
pos = 35,-29

[State 2160, 38]
type = TargetBind
trigger1 = AnimElem = 49, >= 0 && AnimElem = 50, < 0
pos = 42,-66

[State 2160, 39]
type = TargetBind
trigger1 = AnimElem = 50, >= 0 && AnimElem = 51, < 0
pos = 34,-62

[State 2160, 40]
type = TargetBind
trigger1 = AnimElem = 51, >= 0 && AnimElem = 52, < 0
pos = 26,-69

[State 2160, 41]
type = TargetBind
trigger1 = AnimElem = 52, >= 0 && AnimElem = 53, < 0
pos = 24,-91

[State 2160, 42]
type = TargetBind
trigger1 = AnimElem = 53, >= 0 && AnimElem = 54, < 0
pos = -18,-89

[State 2160, 43]
type = PlaySnd
trigger1 = AnimElem = 53
value = 860,0

[State 2160, 44]
type = TargetBind
trigger1 = AnimElem = 54
pos = -65,-113

[State 2160, 45]
type = TargetState
trigger1 = AnimElem = 54
value = 2175

[State 2160, 46]
type = PosAdd
trigger1 = AnimElem = 56
x = -32

[State 2160, 47]
type = ChangeState
trigger1 = AnimTime = 0
value = 2180

; SDM Shermie carnival (hit by)
[Statedef 2170]
movetype = H

[State 2170, 1]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 2170, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 2170

; SDM Shermie carnival (hit by, in the air)
[Statedef 2175]
type = A
movetype = H
physics = N
velset = 1,-13

[State 2175, 1]
type = VelAdd
trigger1 = 1
y = .65

[State 2175, 2]
type = HitBy
trigger1 = 1
value = A,HT

[State 2175, 3]
type = ChangeAnim2
trigger1 = Time = 0
value = 2175

[State 2175, 4]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; SDM Shermie carnival (follow-up)
[Statedef 2180]
type = A
movetype = A
physics = N
anim = 2180
velset = 1,-15

[State 2180, 1]
type = VelAdd
trigger1 = 1
y = .49

[State 2180, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2180, 3]
type = Turn
trigger1 = Time = 0

[State 2180, 4]
type = PlaySnd
trigger1 = Time = 0
value = 2180,0

[State 2180, 5]
type = AfterImageTime
trigger1 = Time = 0
time = 9

[State 2180, 6]
type = HitDef
trigger1 = Time = 0
attr = A, HT
hitflag = A
priority = 3, miss
sparkno = S3140
sparkxy = 15,-45
numhits = 0
p1stateno = 2185
p2facing = 1
p2stateno = 2195
chainID = 2150

; SDM Shermie carnival (spinning)
[Statedef 2185]
type = A
movetype = I
physics = N
anim = 2185
velset = 0,0

[State 2185, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2185, 2]
type = Explod
trigger1 = Time = 0
anim = 1305
sprpriority = 1
postype = p1
pos = 48,-58
bindtime = 1

[State 2185, 3]
type = PlaySnd
trigger1 = Time = 0
value = 800,0

[State 2185, 4]
type = EnvColor
trigger1 = Time = 0
time = 1
value = 255,255,255
under = 1

[State 2185, 5]
type = AssertSpecial
trigger1 = Time = 0
flag = NoFG

[State 2185, 6]
type = AfterImageTime
trigger1 = Time = 0
time = 48

[State 2185, 7]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 48,-57

[State 2185, 8]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 20,-41

[State 2185, 9]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 5, < 0
trigger2 = AnimElem = 7, >= 0 && AnimElem = 9, < 0
trigger3 = AnimElem = 11, >= 0 && AnimElem = 13, < 0
pos = 10,-55

[State 2185, 10]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 7, < 0
trigger2 = AnimElem = 9, >= 0 && AnimElem = 11, < 0
trigger3 = AnimElem = 13, >= 0
pos = 10,-45

[State 2185, 11]
type = VelAdd
trigger1 = AnimElem = 6, >= 0
y = .4

[State 2185, 12]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1330,1

[State 2185, 13]
type = ChangeState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 2190

; SDM Shermie carnival (on the ground)
[Statedef 2190]
type = S
movetype = I
physics = S
anim = 2190
velset = 0,0

[State 2190, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2190, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2190, 3]
type = TargetState
trigger1 = Time = 0
value = 2196

[State 2190, 4]
type = EnvShake
trigger1 = Time = 0
time = 20
ampl = -8

[State 2190, 5]
type = TargetLifeAdd
trigger1 = Time = 0
value = -100

[State 2190, 6]
type = AfterImageTime
trigger1 = Time = 0
time = 36

[State 2190, 7]
type = PlaySnd
trigger1 = Time = 0
value = 1120,1

[State 2190, 8]
type = PlaySnd
trigger1 = Time = 0
value = 2190,0

[State 2190, 9]
type = Explod
trigger1 = Time = 0
anim = 1130
sprpriority = -2
postype = p1
pos = 40,0
bindtime = 1

[State 2190, 10]
type = EnvColor
trigger1 = Time = 1
time = 1
value = 255,255,255
under = 1

[State 2190, 11]
type = AssertSpecial
trigger1 = Time = 1
flag = NoFG

[State 2190, 12]
type = Explod
trigger1 = Time = 4
anim = 1135
sprpriority = 6
postype = p1
pos = 40,0
bindtime = 1

[State 2190, 13]
type = TargetBind
trigger1 = AnimElem = 2, < 0
pos = 40,0

[State 2190, 14]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; SDM Shermie carnival (hit by, spinning)
[Statedef 2195]
type = A
movetype = H
physics = N

[State 2195, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 2195

; SDM Shermie carnival (hit by, on the ground)
[Statedef 2196]
movetype = H

[State 2196, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 2196

[State 2196, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2196, 3]
type = VelSet
trigger1 = Time = 21
x = -4
y = -4

[State 2196, 4]
type = VelAdd
trigger1 = Time > 21
y = .49

[State 2196, 5]
type = ChangeAnim
trigger1 = Anim = 2196 && AnimTime = 0
value = 5160

[State 2196, 6]
type = Turn
trigger1 = Anim = 5160
persistent = 0

[State 2196, 7]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; DM Shermie flash (attempt)
[Statedef 2200]
type = S
movetype = A
physics = S
anim = 2200
poweradd = -1000
velset = 0,0
ctrl = 0

[State 2200, 1]
type = HitDef
trigger1 = Time = 0
attr = S, HT
hitflag = M
priority = 5, miss
sparkno = -1
numhits = 0
p1stateno = 2210
p2facing = 1
p2stateno = 2220

[State 2200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; DM Shermie flash (hitting)
[Statedef 2210]
type = S
movetype = I
physics = N
anim = 2210

[State 2210, 1]
type = Width
trigger1 = AnimElem = 11, >= 0
edge = 32,32

[State 2210, 2]
type = SuperPause
trigger1 = Time = 0
time = 29
movetime = 29
anim = -1
p2defmul = 1

[State 2210, 3]
type = PlaySnd
trigger1 = Time = 0
value = 2200,0

[State 2210, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2210, 5]
type = PlaySnd
trigger1 = Time = 0
value = 3000,0

[State 2210, 6]
type = Explod
trigger1 = Time = 5
anim = 3000
postype = p1
pos = 5,-43
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 2210, 7]
type = Explod
trigger1 = Time = 13
anim = 3010
postype = p1
pos = 5,-43
sprpriority = 4
bindtime = -1
supermovetime = -1

[State 2210, 8]
type = BindToTarget
trigger1 = AnimElem = 1, >= 0 && AnimElem = 7, < 0
pos = -4,54,head

[State 2210, 9]
type = AfterImage
trigger1 = Time = 29
trans = add1
time = 140
timegap = 1
framegap = 3
length = 8

[State 2210, 10]
type = BindToTarget
trigger1 = AnimElem = 7, >= 0 && AnimElem = 8, < 0
pos = -8,70,head

[State 2210, 11]
type = BindToTarget
trigger1 = AnimElem = 8, >= 0 && AnimElem = 9, < 0
pos = -16,78,head

[State 2210, 12]
type = PosAdd
trigger1 = AnimElem = 9
x = 8

[State 2210, 13]
type = PosSet
trigger1 = AnimElem = 9
y = 0

[State 2210, 14]
type = PlaySnd
trigger1 = AnimElem = 11
value = 800,0

[State 2210, 15]
type = Explod
trigger1 = AnimElem = 11
anim = 1305
sprpriority = 1
postype = p1
pos = -16,-56
bindtime = 1

[State 2210, 16]
type = TargetBind
trigger1 = AnimElem = 11, >= 0 && AnimElem = 12, < 0
pos = -10,-57

[State 2210, 17]
type = EnvColor
trigger1 = AnimElem = 11, = 1
trigger2 = AnimElem = 19, = 1
time = 1
value = 255,255,255
under = 1

[State 2210, 18]
type = AssertSpecial
trigger1 = AnimElem = 11, = 1
trigger2 = AnimElem = 19, = 1
flag = NoFG

[State 2210, 19]
type = TargetBind
trigger1 = AnimElem = 12, >= 0 && AnimElem = 13, < 0
pos = -3,-62

[State 2210, 20]
type = TargetBind
trigger1 = AnimElem = 13, >= 0 && AnimElem = 14, < 0
pos = -7,-77

[State 2210, 21]
type = TargetBind
trigger1 = AnimElem = 14, >= 0 && AnimElem = 15, < 0
pos = -13,-95

[State 2210, 22]
type = TargetBind
trigger1 = AnimElem = 15, >= 0 && AnimElem = 16, < 0
pos = 4,-104

[State 2210, 23]
type = PlaySnd
trigger1 = AnimElem = 15
value = 2100,1

[State 2210, 24]
type = TargetBind
trigger1 = AnimElem = 16, >= 0 && AnimElem = 17, < 0
pos = 5,-93

[State 2210, 25]
type = TargetBind
trigger1 = AnimElem = 17, >= 0 && AnimElem = 18, < 0
pos = 9,-74

[State 2210, 26]
type = TargetBind
trigger1 = AnimElem = 18, >= 0 && AnimElem = 19, < 0
pos = 17,-37

[State 2210, 27]
type = TargetBind
trigger1 = AnimElem = 19, >= 0 && AnimElem = 20, < 0
pos = 19,-22

[State 2210, 28]
type = EnvShake
trigger1 = AnimElem = 19
time = 20
ampl = -8

[State 2210, 29]
type = Explod
trigger1 = AnimElem = 19
anim = 1130
sprpriority = -2
postype = p1
pos = 25,0
bindtime = 1

[State 2210, 30]
type = PlaySnd
trigger1 = AnimElem = 19
value = 2190,0

[State 2210, 31]
type = TargetLifeAdd
trigger1 = AnimElem = 19
value = -360

[State 2210, 32]
type = PlaySnd
trigger1 = AnimElem = 19
value = 1120,1

[State 2210, 33]
type = Explod
trigger1 = AnimElem = 19, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = 25,0
bindtime = 1

[State 2210, 34]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; DM Shermie flash (hit by)
[Statedef 2220]
type = S
movetype = H
physics = N
velset = 0,0

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 2220, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 2220

[State 2220, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2220, 3]
type = VelSet
trigger1 = AnimElem = 12, = 6
x = -4
y = -4

[State 2220, 4]
type = VelAdd
trigger1 = Time > 116
y = .47

[State 2220, 5]
type = ChangeAnim
trigger1 = Anim = 2220 && AnimTime = 0
value = 5160

[State 2220, 6]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; SDM Shermie flash (attempt)
[Statedef 2250]
type = S
movetype = A
physics = S
anim = 2250
poweradd = -2000
velset = 0,0
ctrl = 0

[State 2250, 1]
type = HitDef
trigger1 = Time = 0
attr = S, HT
hitflag = M
priority = 5, miss
sparkno = -1
numhits = 0
p1stateno = 2260
p2facing = 1
p2stateno = 2270

[State 2250, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; SDM Shermie flash (hitting)
[Statedef 2260]
type = S
movetype = I
physics = N
anim = 2260

[State 2260, 1]
type = Width
trigger1 = AnimElem = 11, >= 0
edge = 32,32

[State 2260, 2]
type = SuperPause
trigger1 = Time = 0
time = 29
movetime = 29
anim = -1
p2defmul = 1

[State 2260, 3]
type = PlaySnd
trigger1 = Time = 0
value = 2200,0

[State 2260, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, 5]
type = PlaySnd
trigger1 = Time = 0
value = 3000,0

[State 2260, 6]
type = Explod
trigger1 = Time = 5
anim = 3020
postype = p1
pos = 5,-43
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 2260, 7]
type = Explod
trigger1 = Time = 13
anim = 3030
postype = p1
pos = 5,-43
sprpriority = 4
bindtime = -1
supermovetime = -1

[State 2260, 8]
type = BindToTarget
trigger1 = AnimElem = 1, >= 0 && AnimElem = 7, < 0
pos = -4,54,head

[State 2260, 9]
type = AfterImage
trigger1 = Time = 29
trans = add1
time = 295
timegap = 1
framegap = 3
length = 8

[State 2260, 10]
type = BindToTarget
trigger1 = AnimElem = 7, >= 0 && AnimElem = 8, < 0
pos = -8,70,head

[State 2260, 11]
type = BindToTarget
trigger1 = AnimElem = 8, >= 0 && AnimElem = 9, < 0
pos = -16,78,head

[State 2260, 12]
type = PosAdd
trigger1 = AnimElem = 9
x = 8

[State 2260, 13]
type = PosSet
trigger1 = AnimElem = 9
y = 0

[State 2260, 14]
type = PlaySnd
trigger1 = AnimElem = 11
value = 800,0

[State 2260, 15]
type = Explod
trigger1 = AnimElem = 11
anim = 1305
sprpriority = 1
postype = p1
pos = -16,-56
bindtime = 1

[State 2260, 16]
type = TargetBind
trigger1 = AnimElem = 11, >= 0 && AnimElem = 12, < 0
pos = -10,-57

[State 2260, 17]
type = EnvColor
trigger1 = AnimElem = 11, = 1
trigger2 = AnimElem = 19, = 1
trigger3 = AnimElem = 23, = 1
trigger4 = AnimElem = 25, = 1
trigger5 = AnimElem = 27, = 1
trigger6 = AnimElem = 28, = 1
trigger7 = AnimElem = 30, = 1
trigger8 = AnimElem = 32, = 1
trigger9 = AnimElem = 34, = 1
trigger10 = AnimElem = 36, = 1
trigger11 = AnimElem = 38, = 1
trigger12 = AnimElem = 40, = 1
time = 1
value = 255,255,255
under = 1

[State 2260, 18]
type = AssertSpecial
trigger1 = AnimElem = 11, = 1
trigger2 = AnimElem = 19, = 1
trigger3 = AnimElem = 23, = 1
trigger4 = AnimElem = 25, = 1
trigger5 = AnimElem = 27, = 1
trigger6 = AnimElem = 28, = 1
trigger7 = AnimElem = 30, = 1
trigger8 = AnimElem = 32, = 1
trigger9 = AnimElem = 34, = 1
trigger10 = AnimElem = 36, = 1
trigger11 = AnimElem = 38, = 1
trigger12 = AnimElem = 40, = 1
flag = NoFG

[State 2260, 19]
type = TargetBind
trigger1 = AnimElem = 12, >= 0 && AnimElem = 13, < 0
pos = -3,-62

[State 2260, 20]
type = TargetBind
trigger1 = AnimElem = 13, >= 0 && AnimElem = 14, < 0
pos = -7,-77

[State 2260, 21]
type = TargetBind
trigger1 = AnimElem = 14, >= 0 && AnimElem = 15, < 0
pos = -13,-95

[State 2260, 22]
type = TargetBind
trigger1 = AnimElem = 15, >= 0 && AnimElem = 16, < 0
pos = 4,-104

[State 2260, 23]
type = PlaySnd
trigger1 = AnimElem = 15
value = 2100,1

[State 2260, 24]
type = TargetBind
trigger1 = AnimElem = 16, >= 0 && AnimElem = 17, < 0
pos = 5,-93

[State 2260, 25]
type = TargetBind
trigger1 = AnimElem = 17, >= 0 && AnimElem = 18, < 0
pos = 9,-74

[State 2260, 26]
type = TargetBind
trigger1 = AnimElem = 18, >= 0 && AnimElem = 19, < 0
pos = 17,-37

[State 2260, 27]
type = TargetBind
trigger1 = AnimElem = 19, >= 0 && AnimElem = 42, < 0
pos = 19,-22

[State 2260, 28]
type = EnvShake
trigger1 = AnimElem = 19
time = 20
ampl = -8

[State 2260, 29]
type = Explod
trigger1 = AnimElem = 19
anim = 1130
sprpriority = -2
postype = p1
pos = 25,0
bindtime = 1

[State 2260, 30]
type = PlaySnd
trigger1 = AnimElem = 19
value = 2190,0

[State 2260, 31]
type = TargetLifeAdd
trigger1 = AnimElem = 19
value = -40
kill = 0

[State 2260, 32]
type = PlaySnd
trigger1 = AnimElem = 19
value = 1120,1

[State 2260, 33]
type = Explod
trigger1 = AnimElem = 19, = 4
anim = 1135
sprpriority = 6
postype = p1
pos = 25,0
bindtime = 1

[State 2260, 34]
type = PlaySnd
trigger1 = AnimElem = 22
trigger2 = AnimElem = 24
trigger3 = AnimElem = 26
trigger4 = AnimElem = 28
trigger5 = AnimElem = 30
trigger6 = AnimElem = 32
trigger7 = AnimElem = 34
trigger8 = AnimElem = 36
trigger9 = AnimElem = 38
trigger10 = AnimElem = 40
value = 1310,1
channel = 1

[State 2260, 35]
type = TargetLifeAdd
trigger1 = AnimElem = 22
trigger2 = AnimElem = 24
trigger3 = AnimElem = 26
trigger4 = AnimElem = 28
trigger5 = AnimElem = 30
trigger6 = AnimElem = 32
trigger7 = AnimElem = 34
trigger8 = AnimElem = 36
trigger9 = AnimElem = 38
trigger10 = AnimElem = 40
trigger11 = AnimElem = 42
value = -45
kill = IfElse(AnimElem = 40, < 0,0,1)

[State 2260, 36]
type = PlaySnd
trigger1 = AnimElem = 28
value = 2250,0

[State 2260, 37]
type = PlaySnd
trigger1 = AnimElem = 34
value = 2250,1

[State 2260, 38]
type = PlaySnd
trigger1 = AnimElem = 40
value = 2250,2

[State 2260, 39]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; SDM Shermie flash (hit by)
[Statedef 2270]
type = S
movetype = H
physics = N
velset = 0,0

[State destroyself]
type = destroyself
trigger1 = 1

[State removeexplod]
type = removeexplod
trigger1 = 1

[State 2270, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 2270

[State 2270, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2270, 3]
type = VelSet
trigger1 = AnimElem = 32, = 10
x = -4
y = -4

[State 2270, 4]
type = VelAdd
trigger1 = Time > 269
y = .47

[State 2270, 5]
type = ChangeAnim
trigger1 = Anim = 2270 && AnimTime = 0
value = 5160

[State 2270, 6]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; Orochi win A
[Statedef 6181]
type = S
anim = 6181

[State 6181, 1]
type = AssertSpecial
trigger1 = Time = [0,260]
flag = RoundNotOver

[State 6181, 2]
type = PlaySnd
trigger1 = AnimElem = 6
value = 6181,0

[State 6181, 3]
type = Explod
trigger1 = AnimElem = 11
anim = 2010
sprpriority = 4
postype = p1
pos = 20,-136
shadow = 68,68,68
bindtime = 1

[State 6181, 4]
type = EnvShake
trigger1 = AnimElem = 11
time = 20

[State 6181, 5]
type = PlaySnd
trigger1 = AnimElem = 11
value = 2000,1

[State 6181, 6]
type = PlaySnd
trigger1 = AnimElem = 11, = 25
value = 6181,1

; Orochi taunt
[Statedef 6195]
type = S
movetype = I
physics = S
anim = 6195
ctrl = 0
velset = 0,0

[State 6195, 1]
type = CtrlSet
trigger1 = AnimElem = 9
value = 1

[State 6195, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 6195,0
channel = 5

[State 6195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Shajitsu no odori (start)
[Statedef 7000]
type = S
movetype = A
physics = S
anim = 7000
poweradd = 100
velset = 0,0
ctrl = 0

[State 7000, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7000,0

[State 7000, 2]
type = NotHitBy
trigger1 = Time = 0
time = 5
value = SCA

[State 7000, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 7010

; Light Shajitsu no odori (in the air)
[Statedef 7010]
type = A
movetype = A
physics = N
anim = 7010
velset = 3,-8

[State 7010, 1]
type = PlaySnd
trigger1 = Time = 0
value = 40,1

[State 7010, 2]
type = PlaySnd
trigger1 = Time = 0
value = 7000,1

[State 7010, 3]
type = Explod
trigger1 = Time = 0
anim = 7015
postype = p1
pos = 0,0
removetime = -1
bindtime = -1
sprpriority = 4
removeongethit = 1

[State 7010, 4]
type = HitDef
trigger1 = AnimElemNo(0) % 2
attr = A, SA
damage = 30,5
priority = 5
animtype = hard
guardflag = M
sparkno = S3130
guard.sparkno = S3160
sparkxy = -10,-30
hitsound = S7000,2
guardsound = S1000,3
pausetime = 4,4
ground.hittime = 13
ground.type = high
ground.slidetime = 13
ground.velocity = -10.5
air.velocity = -3,-3
p2stateno = 9000

[State 7010, 5]
type = VelAdd
trigger1 = Time > 0
y = .52

[State 7010, 6]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7020

; Light Shajitsu no odori (land)
[Statedef 7020]
type = S
movetype = I
physics = S
anim = 7020
velset = 0,0

[State 7020, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 7020, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 7020, 3]
type = RemoveExplod
trigger1 = Time = 0

[State 7020, 4]
type = PosAdd
trigger1 = AnimElem = 2
x = 16

[State 7020, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Shajitsu no odori (start)
[Statedef 7050]
type = S
movetype = A
physics = S
anim = 7050
poweradd = 120
velset = 0,0
ctrl = 0

[State 7050, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7000,0

[State 7050, 2]
type = NotHitBy
trigger1 = Time = 0
time = 8
value = SCA

[State 7050, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 7060

; Hard Shajitsu no odori (in the air)
[Statedef 7060]
type = A
movetype = A
physics = N
anim = 7060
velset = 4,-8

[State 7060, 1]
type = PlaySnd
trigger1 = Time = 0
value = 40,1

[State 7060, 2]
type = PlaySnd
trigger1 = Time = 0
value = 7000,1

[State 7060, 3]
type = Explod
trigger1 = Time = 0
anim = 7015
postype = p1
pos = 0,0
removetime = -1
bindtime = -1
sprpriority = 4
removeongethit = 1

[State 7060, 4]
type = HitDef
trigger1 = AnimElemNo(0) % 2
attr = A, SA
damage = 40,5
priority = 5
animtype = hard
guardflag = M
sparkno = S3130
guard.sparkno = S3160
sparkxy = -10,-30
hitsound = S7000,2
guardsound = S1000,3
pausetime = 4,4
ground.hittime = 13
ground.type = high
ground.slidetime = 13
ground.velocity = -10
air.velocity = -3,-3
p2stateno = 9000

[State 7060, 5]
type = VelAdd
trigger1 = Time > 0
y = .54

[State 7060, 6]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7070

; Hard Shajitsu no odori (land)
[Statedef 7070]
type = S
movetype = I
physics = S
anim = 7070
velset = 0,0

[State 7070, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 7070, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 7070, 3]
type = RemoveExplod
trigger1 = Time = 0

[State 7070, 4]
type = PosAdd
trigger1 = AnimElem = 2
x = 16

[State 7070, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Raijin no tsue (in the air)
[Statedef 7100]
type = A
movetype = A
physics = N
anim = 7100
poweradd = 120
velset = 2,-6
ctrl = 0

[State 7100, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7100,0

[State 7100, 2]
type = VelAdd
trigger1 = Time > 0
y = .47

[State 7100, 3]
type = Explod
trigger1 = AnimElem = 8, = 1
anim = 7105
postype = p1
pos = 0,0
bindtime = -1
sprpriority = 4
removeongethit = 1

[State 7100, 4]
type = PlaySnd
trigger1 = AnimElem = 8, = 1
value = 7000,1

[State 7100, 5]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
damage = 150,5
animtype = hard
priority = 6, hit
hitflag = MA
guardflag = M
sparkno = S3130
guard.sparkno = S3170
sparkxy = -10,-35
hitsound = S7000,2
guardsound = S1000,3
pausetime = 10,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = 0,5
air.velocity = 0,5
p2stateno = 9000
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = -2.5

[State 7100, 6]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7110

; Light Raijin no tsue (land)
[Statedef 7110]
type = S
movetype = I
physics = S
anim = 7110
velset = 0,0

[State 7110, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 7110, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 7110, 3]
type = RemoveExplod
trigger1 = Time = 0

[State 7110, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Raijin no tsue (in the air)
[Statedef 7150]
type = A
movetype = A
physics = N
anim = 7150
poweradd = 140
velset = 2,-8
ctrl = 0

[State 7150, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7100,0

[State 7150, 2]
type = VelAdd
trigger1 = Time > 0
y = .47

[State 7150, 3]
type = Explod
trigger1 = AnimElem = 8, = 1
anim = 7105
postype = p1
pos = 0,0
bindtime = -1
sprpriority = 4
removeongethit = 1

[State 7150, 4]
type = PlaySnd
trigger1 = AnimElem = 8, = 1
value = 7000,1

[State 7150, 5]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
damage = 160,5
priority = 6, hit
animtype = hard
hitflag = MA
guardflag = M
sparkno = S3130
guard.sparkno = S3170
sparkxy = -10,-35
hitsound = S7000,2
guardsound = S1000,3
pausetime = 10,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = 0,5
air.velocity = 0,5
p2stateno = 9000
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = -2.5

[State 7150, 6]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7160

; Hard Raijin no tsue (land)
[Statedef 7160]
type = S
movetype = I
physics = S
anim = 7160
velset = 0,0

[State 7160, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 7160, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 7160, 3]
type = RemoveExplod
trigger1 = Time = 0

[State 7160, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Close Mugetsu no raiun
[Statedef 7200]
type = S
movetype = A
physics = S
anim = 7200
poweradd = 100
velset = 0,0
ctrl = 0

[State 7200, 1]
type = Explod
trigger1 = AnimElem = 9, = 1 
anim = 7210
sprpriority = 4
postype = p1
pos = 34,0
vel = 2,0
bindtime = 1
removeongethit = 1

[State 7200, 2]
type = PlaySnd
trigger1 = AnimElem = 9, = 1
value = 7200,0
channel = 0

[State 7200, 3]
type = Projectile
trigger1 = AnimElem = 10, = 2
attr = S, SP
projanim = 7220
projhitanim = 7230
projremanim = -1
projremovetime = 33
projshadow = 68,68,68
offset = 64,0
velocity = 0
damage = 140,5
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3120
guard.sparkno = S3170
sparkxy = 10,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2.5,-5

[State 7200, 4]
type = PlaySnd
trigger1 = AnimElem = 10, = 2
value = 7000,2
pan = 64

[State 7200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Medium close Mugetsu no raiun
[Statedef 7225]
type = S
movetype = A
physics = S
anim = 7200
poweradd = 100
velset = 0,0
ctrl = 0

[State 7225, 1]
type = Explod
trigger1 = AnimElem = 9, = 1 
anim = 7210
sprpriority = 4
postype = p1
pos = 34,0
vel = 2,0
bindtime = 1
removeongethit = 1

[State 7225, 2]
type = PlaySnd
trigger1 = AnimElem = 9, = 1
value = 7200,0
channel = 0

[State 7225, 3]
type = Projectile
trigger1 = AnimElem = 10, = 2
attr = S, SP
projanim = 7220
projhitanim = 7230
projremanim = -1
projremovetime = 33
projshadow = 68,68,68
offset = 112,0
velocity = 0
damage = 140,5
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3120
guard.sparkno = S3170
sparkxy = 10,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2.5,-5

[State 7225, 4]
type = PlaySnd
trigger1 = AnimElem = 10, = 2
value = 7000,2
pan = 112

[State 7225, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Medium far Mugetsu no raiun
[Statedef 7250]
type = S
movetype = A
physics = S
anim = 7200
poweradd = 100
velset = 0,0
ctrl = 0

[State 7250, 1]
type = Explod
trigger1 = AnimElem = 9, = 1 
anim = 7210
sprpriority = 4
postype = p1
pos = 34,0
vel = 2,0
bindtime = 1
removeongethit = 1

[State 7250, 2]
type = PlaySnd
trigger1 = AnimElem = 9, = 1
value = 7200,0
channel = 0

[State 7250, 3]
type = Projectile
trigger1 = AnimElem = 10, = 2
attr = S, SP
projanim = 7220
projhitanim = 7230
projremanim = -1
projremovetime = 33
projshadow = 68,68,68
offset = 160,0
velocity = 0
damage = 140,5
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3120
guard.sparkno = S3170
sparkxy = 10,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2.5,-5

[State 7250, 4]
type = PlaySnd
trigger1 = AnimElem = 10, = 2
value = 7000,2
pan = 160

[State 7250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Far Mugetsu no raiun
[Statedef 7275]
type = S
movetype = A
physics = S
anim = 7200
poweradd = 100
velset = 0,0
ctrl = 0

[State 7275, 1]
type = Explod
trigger1 = AnimElem = 9, = 1 
anim = 7210
sprpriority = 4
postype = p1
pos = 34,0
vel = 2,0
bindtime = 1
removeongethit = 1

[State 7275, 2]
type = PlaySnd
trigger1 = AnimElem = 9, = 1
value = 7200,0
channel = 0

[State 7275, 3]
type = Projectile
trigger1 = AnimElem = 10, = 2
attr = S, SP
projanim = 7220
projhitanim = 7230
projremanim = -1
projremovetime = 33
projshadow = 68,68,68
offset = 208,0
velocity = 0
damage = 140,5
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3120
guard.sparkno = S3170
sparkxy = 10,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2.5,-5

[State 7275, 4]
type = PlaySnd
trigger1 = AnimElem = 10, = 2
value = 7000,2
pan = 208

[State 7275, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Light Yatanagi no muchi
[Statedef 7300]
type = S
movetype = A
physics = S
anim = 7300
poweradd = 100
velset = 0,0
ctrl = 0

[State 7300, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7300,0
channel = 0

[State 7300, 2]
type = PosAdd
trigger1 = AnimElem = 2 || AnimElem = 3 || AnimElem = 4 || AnimElem = 5 || AnimElem = 6
x = 8

[State 7300, 3]
type = Explod
trigger1 = AnimElem = 6, = 1 
anim = 7310
sprpriority = 4
postype = p1
pos = 0,0
bindtime = -1
removeongethit = 1

[State 7300, 4]
type = PlaySnd
trigger1 = AnimElem = 6, = 1
value = 7300,1

[State 7300, 5]
type = HitDef
trigger1 = AnimElem = 9
attr = S, SA
damage = 50,5
priority = 6
animtype = hard
guardflag = M
sparkno = S3130
guard.sparkno = S3160
sparkxy = -10,-75
hitsound = S7000,2
guardsound = S1000,3
pausetime = 0,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = 0
air.velocity = -4,-3
p2stateno = 9000
fall = IfElse((p2statetype != A),0,1)
fall.recover = 0

[State 7300, 6]
type = Projectile
trigger1 = AnimElem = 15, = 1
attr = S, SP
ProjID = 7300
projanim = 7320
projhitanim = 7330
projremanim = -1
projremovetime = 16
projshadow = 68,68,68
offset = 44,0
velocity = 4,0
damage = 60,5
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 10,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6,-5.4
air.velocity = -3.6,-5
p2stateno = 9000
fall = 1
fall.recover = 0

[State 7300, 7]
type = PlaySnd
trigger1 = AnimElem = 15, = 1
value = 7300,2

[State 7300, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Hard Yatanagi no muchi
[Statedef 7350]
type = S
movetype = A
physics = S
anim = 7350
poweradd = 120
velset = 0,0
ctrl = 0

[State 7350, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7300,0
channel = 0

[State 7350, 2]
type = PosAdd
trigger1 = AnimElem = 2 || AnimElem = 3
x = 8

[State 7350, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 12

[State 7350, 4]
type = PosAdd
trigger1 = AnimElem = 4, = 1 || AnimElem = 5, = 1
x = 3

[State 7350, 5]
type = PosAdd
trigger1 = AnimElem = 5 || AnimElem = 6
x = 11

[State 7350, 6]
type = Explod
trigger1 = AnimElem = 6, = 1 
anim = 7310
sprpriority = 4
postype = p1
pos = 0,0
bindtime = -1
removeongethit = 1

[State 7350, 7]
type = PlaySnd
trigger1 = AnimElem = 6, = 1
value = 7300,1

[State 7350, 8]
type = HitDef
trigger1 = AnimElem = 9
attr = S, SA
damage = 60,5
priority = 6
animtype = hard
guardflag = M
sparkno = S3130
guard.sparkno = S3160
sparkxy = -10,-75
hitsound = S7000,2
guardsound = S1000,3
pausetime = 0,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = 0
air.velocity = -4,-3
p2stateno = 9000
fall = IfElse((p2statetype != A),0,1)
fall.recover = 0

[State 7350, 9]
type = Projectile
trigger1 = AnimElem = 15, = 1
attr = S, SP
ProjID = 7300
projanim = 7320
projhitanim = 7330
projremanim = -1
projremovetime = 16
projshadow = 68,68,68
offset = 44,0
velocity = 7,0
damage = 100,5
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 10,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6,-5.4
air.velocity = -3.6,-5
p2stateno = 9000
fall = 1
fall.recover = 0

[State 7350, 10]
type = PlaySnd
trigger1 = AnimElem = 15, = 1
value = 7300,2

[State 7350, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; SDM Shukumei, gen'ei, shinshi (start)
[Statedef 8000]
type = S
movetype = A
physics = S
anim = 8000
poweradd = -1000
velset = 0,0
ctrl = 0

[State 8000, 1]
type = SuperPause
trigger1 = Time = 0
time = 29
movetime = 29
anim = -1

[State 8000, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 8000, 3]
type = PlaySnd
trigger1 = Time = 0
value = 3000,0

[State 8000, 4]
type = PlaySnd
trigger1 = Time = 0
value = 8000,0

[State 8000, 5]
type = Explod
trigger1 = Time = 5
anim = 3000
postype = p1
pos = 28,-57
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 8000, 6]
type = Explod
trigger1 = Time = 13
anim = 3010
postype = p1
pos = 28,-57
sprpriority = 4
bindtime = -1
supermovetime = -1

[State 8000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 8010

; DM Shukumei, gen'ei, shinshi (attack)
[Statedef 8010]
type = A
movetype = A
physics = N
anim = 8010
velset = 8,0

[State 8010, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 8010, 2]
type = Width
trigger1 = 1
edge = 10,10

[State 8010, 3]
type = Explod
trigger1 = Time = 0
anim = 8020
postype = p1
pos = 0,0
sprpriority = 4
bindtime = 1

[State 8010, 4]
type = PlaySnd
trigger1 = Time = 0
value = 8010,0

[State 8010, 5]
type = PlaySnd
trigger1 = Time = 0
value = 8100,1

[State 8010, 6]
type = Explod
trigger1 = AnimElemNo(0) = 2 && Time > 1
anim = 8025
postype = p1
pos = 64,0
sprpriority = 4
persistent = 6

[State 8010, 7]
type = HitDef
trigger1 = AnimElem = 4
attr = A, HA
damage = 330,10
priority = 7
animtype = up
hitflag = MA
guardflag = M
sparkno = S3130
guard.sparkno = S3170
sparkxy = -10,-75
hitsound = S7000,2
guardsound = S1000,3
pausetime = 6,6
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -1,-15
air.velocity = -1,-15
yaccel = .8
p2stateno = 9000
fall = 1
fall.recover = 0

[State 8010, 8]
type = ChangeState
trigger1 = Time = 28
value = 8030

; DM Shukumei, gen'ei, shinshi (land)
[Statedef 8030]
type = S
movetype = I
physics = N
anim = 8030

[State 8030, 1]
type = Explod
trigger1 = Time = 0
anim = 8020
postype = p1
pos = 0,0
sprpriority = 4
bindtime = 1

[State 8030, 2]
type = velset
trigger1 = Time = 4
x = 0

[State 8030, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; SDM Shukumei, gen'ei, shinshi (start)
[Statedef 8050]
type = S
movetype = A
physics = S
anim = 8050
poweradd = -2000
velset = 0,0
ctrl = 0

[State 8050, 1]
type = SuperPause
trigger1 = Time = 0
time = 29
movetime = 29
anim = -1

[State 8050, 2]
type = NotHitBy
trigger1 = Time = 0
time = 32
value = SCA

[State 8050, 3]
type = PlaySnd
trigger1 = Time = 0
value = 3000,0

[State 8050, 4]
type = PlaySnd
trigger1 = Time = 0
value = 8000,0

[State 8050, 5]
type = SprPriority
trigger1 = Time = 0
value = 2

[State 8050, 6]
type = Explod
trigger1 = Time = 5
anim = 3020
postype = p1
pos = 28,-57
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 8050, 7]
type = Explod
trigger1 = Time = 13
anim = 3030
postype = p1
pos = 28,-57
sprpriority = 4
bindtime = -1
supermovetime = -1

[State 8050, 8]
type = Helper
trigger1 = AnimElem = 7
postype = p1
pos = 0,0
stateno = 8090

[State 8050, 9]
type = Helper
trigger1 = AnimElem = 7
postype = p1
pos = 0,0
stateno = 8091

[State 8050, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 8060

; SDM Shukumei, gen'ei, shinshi (attack)
[Statedef 8060]
type = A
movetype = A
physics = N
anim = 8060
velset = 8,0

[State 8060, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 8060, 2]
type = Width
trigger1 = 1
edge = 10,10

[State 8060, 3]
type = Explod
trigger1 = Time = 0
anim = 8020
postype = p1
pos = 0,0
sprpriority = 4
bindtime = 1

[State 8060, 4]
type = PlaySnd
trigger1 = Time = 0
value = 8010,0

[State 8060, 5]
type = PlaySnd
trigger1 = Time = 0
value = 8100,1

[State 8060, 6]
type = Explod
trigger1 = AnimElemNo(0) = 3
anim = 8025
postype = p1
pos = 64,0
sprpriority = 4

[State 8060, 7]
type = HitDef
trigger1 = AnimElem = 4 && HitCount < 5
attr = A, HA
damage = 90,10
priority = 7
animtype = up
hitflag = MAF
guardflag = M
sparkno = S3130
guard.sparkno = S3170
sparkxy = -10,-75
hitsound = S7000,2
guardsound = S1000,3
pausetime = 2,2
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -7.5,-5
air.velocity = -7.5,-5
yaccel = .39
p2stateno = 9000
fall = 1
fall.recover = 0

[State 8060, 8]
type = ChangeState
trigger1 = Time = 36
value = 8080

; SDM Shukumei, gen'ei, shinshi (land)
[Statedef 8080]
type = S
movetype = I
physics = N
anim = 8080

[State 8080, 1]
type = Explod
trigger1 = Time = 0
anim = 8020
postype = p1
pos = 0,0
sprpriority = 4
bindtime = 1

[State 8080, 2]
type = velset
trigger1 = Time = 4
x = 0

[State 8080, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; SDM Shukumei, gen'ei, shinshi (clone A)
[Statedef 8090]
anim = 8090

[State 8090, 1]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 8090, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 8095

; SDM Shukumei, gen'ei, shinshi (clone B)
[Statedef 8091]
anim = 8091

[State 8091, 1]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 8091, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 8096

; SDM Shukumei, gen'ei, shinshi (clone C)
[Statedef 8095]
anim = 8095

[State 8095, 1]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 8095, 2]
type = ChangeAnim
trigger1 = root, AnimElem = 1, >= 0 && AnimElem = 2, < 0
value = 8095
elem = 1

[State 8095, 3]
type = ChangeAnim
trigger1 = root, AnimElem = 2, >= 0 && AnimElem = 3, < 0
value = 8095
elem = 2

[State 8095, 4]
type = ChangeAnim
trigger1 = root, AnimElem = 3, >= 0 && AnimElem = 4, < 0
value = 8095
elem = 3

[State 8095, 5]
type = ChangeAnim
trigger1 = root, AnimElem = 4, >= 0
value = 8095
elem = 4

[State 8095. 6]
type = DestroySelf
trigger1 = root, stateno != 8060

; SDM Shukumei, gen'ei, shinshi (clone D)
[Statedef 8096]
anim = 8096

[State 8096, 1]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 8096, 2]
type = ChangeAnim
trigger1 = root, AnimElem = 1, >= 0 && AnimElem = 2, < 0
value = 8096
elem = 1

[State 8096, 3]
type = ChangeAnim
trigger1 = root, AnimElem = 2, >= 0 && AnimElem = 3, < 0
value = 8096
elem = 2

[State 8096, 4]
type = ChangeAnim
trigger1 = root, AnimElem = 3, >= 0 && AnimElem = 4, < 0
value = 8096
elem = 3

[State 8096, 5]
type = ChangeAnim
trigger1 = root, AnimElem = 4, >= 0
value = 8096
elem = 4

[State 8096. 6]
type = DestroySelf
trigger1 = root, stateno != 8060

; DM Ankoku raikohken
[Statedef 8100]
type = S
movetype = A
physics = S
anim = 8100
poweradd = -1000
velset = 0,0
ctrl = 0

[State 8100, 1]
type = SuperPause
trigger1 = Time = 0
time = 29
movetime = 29
anim = -1

[State 8100, 2]
type = NotHitBy
trigger1 = Time = 0
time = 36
value = SCA

[State 8100, 3]
type = PlaySnd
trigger1 = Time = 0
value = 3000,0

[State 8100, 4]
type = PlaySnd
trigger1 = Time = 0
value = 8100,0

[State 8100, 5]
type = Explod
trigger1 = Time = 5
anim = 3000
postype = p1
pos = -58,-93
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 8100, 6]
type = Explod
trigger1 = Time = 13
anim = 3010
postype = p1
pos = -58,-93
sprpriority = 4
bindtime = -1
supermovetime = -1

[State 8100, 7]
type = Explod
trigger1 = AnimElem = 4, = 1
anim = 8110
postype = p1
pos = 0,0
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 8100, 8]
type = Explod
trigger1 = AnimElem = 4, = 3
anim = 8105
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
supermovetime = -1

[State 8100, 9]
type = PlaySnd
trigger1 = AnimElem = 6, = 1
value = 8100,1

[State 8100, 10]
type = Projectile
trigger1 = AnimElem = 6, = 1
attr = S, HA
projpriority = 7
projanim = 8120
projhitanim = 8120
projremanim = 8120
projremovetime = 10
projshadow = 68,68,68
getpower = 0
offset = 0,0
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6
air.velocity = -3.6,-6
p2stateno = 9000

[State 8100, 11]
type = Projectile
trigger1 = AnimElem = 6, = 11 || AnimElem = 6, = 20 || AnimElem = 6, = 29
attr = S, HA
projpriority = 7
projanim = 8121
projhitanim = 8121
projremanim = 8121
projremovetime = 9
projshadow = 68,68,68
getpower = 0
offset = 0,0
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6
air.velocity = -3.6,-6
p2stateno = 9000

[State 8100, 12]
type = Projectile
trigger1 = AnimElem = 6, = 38
attr = S, HA
projpriority = 7
projanim = 8125
ProjID = 8125
projhitanim = 8125
projremanim = 8125
projremovetime = 10
projshadow = 68,68,68
getpower = 0
offset = 0,0
velocity = 0,0
damage = 60,10
animtype = up
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6,-6
air.velocity = -3.6,-6
p2stateno = 9000
fall = 1
fall.recover = 0

[State 8100, 13]
type = EnvColor
trigger1 = ProjHit = 1, < 1
time = 1
value = 255,255,255
under = 1

[State 8100, 14]
type = AssertSpecial
trigger1 = ProjHit = 1, < 1
flag = NoFG

[State 8100, 15]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; SDM Ankoku raikohken
[Statedef 8150]
type = S
movetype = A
physics = S
anim = 8150
poweradd = -2000
velset = 0,0
ctrl = 0

[State 8150, 1]
type = SuperPause
trigger1 = Time = 0
time = 29
movetime = 29
anim = -1

[State 8150, 2]
type = NotHitBy
trigger1 = Time = 0
time = 36
value = SCA

[State 8150, 3]
type = PlaySnd
trigger1 = Time = 0
value = 3000,0

[State 8150, 4]
type = PlaySnd
trigger1 = Time = 0
value = 8100,0

[State 8150, 5]
type = Explod
trigger1 = Time = 5
anim = 3020
postype = p1
pos = -58,-93
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 8150, 6]
type = Explod
trigger1 = Time = 13
anim = 3030
postype = p1
pos = -58,-93
sprpriority = 4
bindtime = -1
supermovetime = -1

[State 8150, 7]
type = Explod
trigger1 = AnimElem = 4, = 1
anim = 8160
postype = p1
pos = 0,0
sprpriority = -2
bindtime = -1
supermovetime = -1

[State 8150, 8]
type = Explod
trigger1 = AnimElem = 4, = 3
anim = 8155
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
supermovetime = -1

[State 8150, 9]
type = Projectile
trigger1 = AnimElem = 6, = 1
attr = S, HA
projpriority = 7
projanim = 8170
projhitanim = 8170
projremanim = 8170
projremovetime = 10
projshadow = 68,68,68
projsprpriority = 9
getpower = 0
offset = 0,0
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6
air.velocity = -3.6,-6
p2stateno = 9000

[State 8150, 10]
type = PlaySnd
trigger1 = AnimElem = 6, = 5
value = 8100,1

[State 8150, 11]
type = Projectile
trigger1 = AnimElem = 6, = 5
attr = S, HA
projpriority = 7
projanim = 8170
projhitanim = 8170
projremanim = 8170
projremovetime = 10
projshadow = 68,68,68
projsprpriority = 8
getpower = 0
offset = -20,-28
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6
air.velocity = -3.6,-6
p2stateno = 9000

[State 8150, 12]
type = Projectile
trigger1 = AnimElem = 6, = 9
attr = S, HA
projpriority = 7
projanim = 8170
projhitanim = 8170
projremanim = 8170
projremovetime = 10
projshadow = 68,68,68
projsprpriority = 7
getpower = 0
offset = 4,20
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6
air.velocity = -3.6,-6
p2stateno = 9000

[State 8150, 13]
type = Projectile
trigger1 = AnimElem = 6, = 13
attr = S, HA
projpriority = 7
projanim = 8170
projhitanim = 8170
projremanim = 8170
projremovetime = 10
projshadow = 68,68,68
projsprpriority = 6
getpower = 0
offset = 12,-24
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6
air.velocity = -3.6,-6
p2stateno = 9000

[State 8150, 14]
type = Projectile
trigger1 = AnimElem = 6, = 17
attr = S, HA
projpriority = 7
projanim = 8170
projhitanim = 8170
projremanim = 8170
projremovetime = 10
projshadow = 68,68,68
projsprpriority = 5
getpower = 0
offset = -16,14
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6
air.velocity = -3.6,-6
p2stateno = 9000

[State 8150, 15]
type = Projectile
trigger1 = AnimElem = 6, = 21
attr = S, HA
projpriority = 7
projanim = 8170
projhitanim = 8170
projremanim = 8170
projremovetime = 10
projshadow = 68,68,68
projsprpriority = 4
getpower = 0
offset = 14,-12
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6
air.velocity = -3.6,-6
p2stateno = 9000

[State 8150, 16]
type = Projectile
trigger1 = AnimElem = 6, = 25
attr = S, HA
projpriority = 7
projanim = 8170
projhitanim = 8170
projremanim = 8170
projremovetime = 10
projshadow = 68,68,68
projsprpriority = 3
getpower = 0
offset = -20,8
velocity = 0,0
damage = 60,10
animtype = Hard
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.velocity = -3.6
air.velocity = -3.6,-6
air.velocity = 0,0
p2stateno = 9000

[State 8150, 17]
type = Projectile
trigger1 = AnimElem = 6, = 29
attr = S, HA
projpriority = 7
projID = 8175
projanim = 8175
projhitanim = 8175
projremanim = 8175
projremovetime = 10
projshadow = 68,68,68
projsprpriority = 2
getpower = 0
offset = -12,-10
velocity = 0,0
damage = 60,10
animtype = up
hitflag = MA
guardflag = M
pausetime = 0,12
sparkno = S3130
guard.sparkno = S3170
sparkxy = 80,-80
hitsound = S7000,2
guardsound = S1000,3
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -3.6,-6
air.velocity = -3.6,-6
p2stateno = 9000
fall = 1
fall.recover = 0

[State 8150, 18]
type = EnvColor
trigger1 = ProjHit = 1, < 1
time = 1
value = 255,255,255
under = 1

[State 8150, 19]
type = AssertSpecial
trigger1 = ProjHit = 1, < 1
flag = NoFG

[State 8150, 20]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Getting hit (lightning version)
[Statedef 9000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 9000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 9000, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 9000, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 6]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 7]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 9001

[State 9000, 8]
type = ChangeState
trigger1 = HitShakeOver
value = 9030

[State 9000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 9000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 9000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[Statedef 9001]
type    = S
movetype= H
physics = S

[State 9001, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 9001, 4]
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 9001, 5]
type = VelSet
trigger1 = HitOver
x = 0

[State 9001, 6]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 9001, 7]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

[Statedef 9010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 9010, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 9010, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 9010, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 9010, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 9010, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 9011

[State 9010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 9030

[State 9010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 9010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 9010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[Statedef 9011]
type    = C
movetype= H
physics = C

[State 9011, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 9011, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9011, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 9011, 4]
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 9011, 5]
type = VelSet
trigger1 = HitOver
x = 0

[State 9011, 6]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 9011, 7]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1

[Statedef 9020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 9020, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 9020, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 9020, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 9020, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 9020, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9020, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 9030

[State 9020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 9020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 9020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[Statedef 9030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 9030, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 9030, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 9030, 3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 9030, 4]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5040

[State 9030, 5]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 9050

[State 9030, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 9035

[Statedef 9035]
type    = A
movetype= H
physics = N

[State 9035, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 9035, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059]
trigger1 = Anim != 5090
value = 5035

[State 9035, 3]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 9035, 4]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 10
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 5040

[State 9035, 5]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 10
trigger4 = Time = 0
trigger4 = Anim != 5035.
value = 9050

[Statedef 9050]
type    = A
movetype= H
physics = N

[State 9050, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 9050, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090
value = 5050

[State 9050, 3]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 9050, 4]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 9050, 5]
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 9050, 6]
type = SelfState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 9050, 7]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100

;=========================================
[Statedef 5201]
type    = S
movetype= H
physics = S
anim = 5200
ctrl = 0

[State 5201]
type = PlaySnd
trigger1 = !Time
value = 200,1
channel = 0

[State 5201, Turn] 
type = Turn
trigger1 = !Time && P2Dist X < -5

[State 5201, VelSet]
type = VelSet
trigger1 = !Time
y = 0

[State 5201, Roll Back Vel]
type = VelSet
trigger1 = Time = [0,12]
x = -4

[State 5201, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 5201, Invincible]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;=============================================================
[Statedef -2]

;*********************=1000*********************
[State 0, PowerSet]
type = PowerSet
trigger1=roundstate= 0
trigger1 = roundno = 1
value = 1000
ignorehitpause =1

; Remove fleeting AfterImage
[State -2, 1]
type = AfterImage
trigger1 = MoveType = H
time = 0

; Play "land" sound
[State -2, 2]
type = PlaySnd
trigger1 = stateno = 52 && Time = 1
value = 52,0

; Play "ouch" sound when hit light or medium
[State -2, 3]
type = PlaySnd
triggerall = random < 250 && time = 1 && stateno = 5000 && Alive
trigger1 = anim = 5000 || anim = 5001 || anim = 5010 || anim = 5011
value = 5000,0

; Play "ouch" sound when hit hard
[State -2, 5]
type = PlaySnd
triggerall = random < 250 && time = 1 && stateno = 5000 && Alive
trigger1 = anim = 5002 || anim = 5012
value = 5000,1

; Play "ouch" sound when hit hard (in the air)
[State -2, 6]
type = PlaySnd
trigger1 = random < 250 && time = 1 && stateno = 5010 && anim = 5022 && Alive
value = 5000,1

; Play "ouch" when landing on back
[State -2, 7]
type = PlaySnd
trigger1 = random < 250 && time = 1 && stateno = 5100 && Alive
value = 5100,0

; Stop channel 1, 2 & 3 when hit
[State -2, 8]
type = StopSnd
trigger1 = MoveType = H
channel = 1 && 2 && 3 && 4

; Stop running sound
[State -2, 9]
type = StopSnd
trigger1 = stateno != 100
channel = 4

; Stop sound if != taunt
[State -2, 10]
type = StopSnd
trigger1 = stateno != 195 && stateno != 6195 && stateno != 0
channel = 5

; Remove Orochi stance lightning
[State -2, 13]
type = RemoveExplod
trigger1 = stateno != 0
ID = 1

; Spark A
[State -2, 14]
type = Explod
trigger1 = (p2stateno = [9000,9050]) && p2movetype = H
trigger1 = random < 300
trigger1 = NumExplod(3200) < 3
anim = 3200
ID = 3200
postype = p2
pos = 0,-25
random = 100,100
bindtime = 1
sprpriority = 4

; Spark B
[State -2, 14]
type = Explod
trigger1 = (p2stateno = [9000,9050]) && p2movetype = H
trigger1 = random < 250
trigger1 = NumExplod(3200) < 3
anim = 3210
ID = 3200
postype = p2
pos = 0,-25
random = 100,100
bindtime = 1
sprpriority = 4

;==========================================
[State -2, 8]
type = varset
triggerall = var(30)=0
trigger1 = palno<=6
var(4)=0

[State -2, 8]
type = varset
triggerall = var(30)=0
trigger1 = palno<=6
var(1)=0

[State -2, 8]
type = varset
triggerall = var(30)=0
trigger1 = palno>=1
var(4)=1

[State -2, 8]
type = varset
triggerall = var(30)=0
trigger1 = palno>=1
var(1)=1000

[State -2, 15]
type = varset
triggerall = var(30)
trigger1 = lose
var(4)=1

[State -2, 15]
type = varset
triggerall = var(30)
trigger1 = lose
var(1)=1000
